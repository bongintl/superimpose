{"version":3,"sources":["bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","init","arguments","widths","push","q","values","window","innerWidth","bind","args","apply","2","firstLoad","is","done","$","removeClass","3","$buo_f","document","createElement","src","body","appendChild","addEventListener","attachEvent","4","hasClass","./breakpoint.js","./firstLoad.js","./isIE.js","./metrics.js","./navigation.js","./router/main.js","./static.js","5","breakpoint","baseMargin","menuMargin","6","$nav","$full","filter","$small","$dropdowns","find","isHidden","children","on","toggleClass","each","$this","this","$menu","addClass","show","hide","elements","$both","7","Clones","clones","prototype","sort","collections","$elements","j","forEach","fnName","selector","map","clone","fn","collection","$element","8","Corner","options","wall1","SuperFace","horizontal","content","wall2","$inner1","$content","$inner2","fov","mouseX","renderer","utils","scroll","none","scene","add","layout","isMouse","w","h","innerHeight","halfWidth","near","perfectZ","depth","far","cz","lefWallRatio","rightWallRatio","leftWallScreenWidth","rightWallScreenWidth","depthSquared","Math","pow","leftWallWidth","sqrt","rightWallWidth","setSize","position","x","z","rotation","y","atan2","setHeight","totalWallWidth","width","flatAngle","margin","sin","maxWallWidth","render","setMouse","remove","./main.js","./scroll.js","./superFace.js","./utils.js","9","setFOV","camera","updateProjectionMatrix","resize","min","documentElement","clientWidth","clientHeight","aspect","THREE","CSS3DRenderer","domElement","id","Scene","PerspectiveCamera","getSize","./three.cssrenderer.js","./zepto.plugins.js","10","tick","frame","requestAnimationFrame","now","Date","dT","then","name","funcs","stop","start","random","toString","funcCount","cancelAnimationFrame","lastTime","vendors","callback","element","currTime","getTime","timeToCall","max","setTimeout","clearTimeout","11","ResizableCSS3DObject","CSS3DObject","Object","create","constructor","halfHeight","css","height","12","Room","faceOptions","PI","size","self","onload","setScrollSize","append","appendTo","m","fovX","tan","degToRad","setX","setY","undefined","scrollTop","translate","parent","detach","../metrics.js","13","sizer","preventDefault","scrollBy","deltaY","deltaX","overflowX","overflowY","14","Showcase","$projectTitleText","logo","$clientText","$logo","imgs","imgIndex","sideIndex","$img","title","data","client","mouseenter","text","mouseleave","img3d","SuperSingleton","axis","sides","imgClones","list","img","contentOffset","prevMouse","Vector2","mouse","slowedMouse","rAF","startTime","halfW","halfH","perimiter","maxImageHeight","imgW","imgH","nativeHeight","nativeWidth","getZ","setContentSize","depthOffset","setAxisLimits","scrollOffset","scrollHeight","setScroll","showcase","elapsed","setOpacity","copy","./clones.js","./rAF.js","./resizableCSS3DObject.js","./superSingleton.js","15","$model","setWidth","to","16","normalize","scale","oldMin","oldMax","newMin","newMax","_","extend","attached","cropped","centerY","bounds","center","top","bottom","contentHeight","axisMin","axisMax","cropMin","cropMax","attach","crop","cropTop","cropBottom","backgroundPosition","cursor","distance","distanceTo","17","Object3D","style","event","parentNode","removeChild","CSS3DSprite","console","log","REVISION","_width","_height","_widthHalf","_heightHalf","matrix","Matrix4","cache","objects","overflow","WebkitTransformStyle","MozTransformStyle","oTransformStyle","transformStyle","cameraElement","setClearColor","epsilon","value","abs","Number","EPSILON","getCameraCSSMatrix","getObjectCSSMatrix","renderObject","object","matrixWorldInverse","transpose","copyPosition","matrixWorld","cachedStyle","WebkitTransform","MozTransform","oTransform","transform","WebkitPerspective","MozPerspective","oPerspective","perspective","updateMatrixWorld","getInverse","18","fovY","fovY_rad","fovX_rad","atan","radToDeg","19","videoUrlToEmbed","url","match","vimeoRe","youtubeRe","indexOf","g","hasOwnProperty","toLowerCase","aliases","split","Modernizr","Boolean","join","className","_config","classPrefix","baseVal","enableJSClass","RegExp","replace","enableClasses","toUpperCase","createElementNS","p","d","fake","c","parseInt","type","styleSheet","cssText","createTextNode","background","offsetHeight","CSS","supports","getComputedStyle","v","N","modElem","shift","charAt","slice","S","E","C","_version","usePrefixes","_q","addTest","addAsyncTest","nodeName","_cssomPrefixes","b","prefixes","CSSRule","atRule","_domPrefixes","elem","unshift","testAllProps","prefixed","P","PREFIXED_TRANSFORM","$window","sizes","small","medium","large","xlarge","DPR","devicePixelRatio","loadImages","el","go","setSrc","attr","loadVideo","videoUrl","$iframe","20","routes","/","/work","/archive","/info","/project/:slug","/post/:slug","21","evts","handlers","off","trigger","evt","fns","ret","result","22","config","common","home","info","work","project","page","base","getTemplate","transitionOut","./config.js","./routes/common.js","./routes/home.js","./routes/info.js","./routes/project.js","./routes/work.js","23","saveTemplate","html","ctx","template","templateCache","path","next","$loading","cached","innerHTML","empty","get","response","delay","events","$htmlBody","scrollLeft","routeName","$body","index","../../firstLoad.js","../config.js","../events.js","24","navigation","mousemove","clientX","clientY","../../navigation.js","../../renderer/showcase.js","25","corner","../../renderer/corner.js","26","metrics","$main","room","$titles","$autoHeights","lastScroll","debounce","pageYOffset","../../metrics.js","../../renderer/clones.js","../../renderer/room.js","27","columns","pageXOffset","28","nav","$document","onResize","$rspImgs","onScroll","st","./renderer/showcase.js","./renderer/zepto.plugins.js"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar widths = [];\n\nfunction init(){\n    \n    for(var i = 0; i <= arguments.length; i++) widths.push( arguments[i] );\n    \n}\n\nfunction q() {\n    \n    var values = arguments;\n\tvar ret;\n\t\n\tfor(var i = 0; i < widths.length; i++){\n\t    \n\t    if( window.innerWidth <= widths[i] ) return values[i];\n\t    \n\t}\n\t\n\treturn values[ values.length - 1 ];\n\t\n}\n\nfunction bind(){\n    \n    var args = arguments;\n    \n    return function(){\n        \n        return q.apply(null, args);\n        \n    }\n    \n}\n\nmodule.exports = {\n    \n    init: init,\n    q: q,\n    bind: bind\n    \n}\n},{}],2:[function(require,module,exports){\nvar firstLoad = {\n    is: true,\n    done: function(){\n        $('body').removeClass('first-load');\n        firstLoad.is = false;\n    }\n}\n\nmodule.exports = firstLoad;\n},{}],3:[function(require,module,exports){\nvar $buoop = {vs:{i:11,f:25,o:12.1,s:7},c:2}; \nfunction $buo_f(){ \n var e = document.createElement(\"script\"); \n e.src = \"//browser-update.org/update.min.js\"; \n document.body.appendChild(e);\n};\ntry {document.addEventListener(\"DOMContentLoaded\", $buo_f,false)}\ncatch(e){window.attachEvent(\"onload\", $buo_f)}\n\n},{}],4:[function(require,module,exports){\nrequire('./breakpoint.js').init( 414, 768 );\nrequire('./navigation.js').init();\nrequire('./isIE.js');\n\nvar firstLoad = require('./firstLoad.js');\nvar metrics = require('./metrics.js');\n\nif( $('body').hasClass('three-d') ){\n    require('./router/main.js')();\n} else {\n    require('./static.js')();\n}\n\nfirstLoad.done();\n},{\"./breakpoint.js\":1,\"./firstLoad.js\":2,\"./isIE.js\":3,\"./metrics.js\":5,\"./navigation.js\":6,\"./router/main.js\":22,\"./static.js\":28}],5:[function(require,module,exports){\nvar breakpoint = require('./breakpoint.js');\n\nmodule.exports = {\n    \n    baseMargin: 20,\n    \n    menuMargin: breakpoint.bind(14 * 3, 16 * 3, 18 * 3)\n    \n}\n},{\"./breakpoint.js\":1}],6:[function(require,module,exports){\nvar $nav = $('.nav_full, .nav_small');\nvar $full = $nav.filter('.nav_full');\nvar $small = $nav.filter('.nav_small');\nvar $dropdowns = $full.find('.dropdown');\n\nvar isHidden = false;\n\nmodule.exports = {\n    \n    init: function(){\n        \n        $(function(){\n        \n            $small.children().on('click', function(){\n                $small.toggleClass('open');\n            })\n            \n            $dropdowns.each( function(){\n                \n                var $this = $(this);\n                \n                var $menu = $this.find('.dropdown__menu');\n                \n                $this.on('mouseenter', function(){\n                    $menu.addClass('open');\n                }).on('mouseleave', function(){\n                    $menu.removeClass('open');\n                })\n                \n            })\n            \n            // $('.social-toggle').on('mouseenter', function(){\n            //     $socialMenu.addClass('open');\n            // }).on('mouseleave', function(){\n            //     $socialMenu.removeClass('open');\n            // })\n            \n        })\n        \n    },\n    \n    show: function(){\n        if(!isHidden) return;\n        $nav.removeClass('nav_hidden');\n        isHidden = false;\n    },\n    \n    hide: function(){\n        if(isHidden) return;\n        $nav.addClass('nav_hidden');\n        isHidden = true;\n    },\n    \n    elements: {\n        $full: $full,\n        $small: $small,\n        $both: $nav\n    }\n    \n}\n},{}],7:[function(require,module,exports){\nfunction Clones(){\n    \n    this.clones = [];\n    \n    for( var i = 0; i < arguments.length; i++ )\n        this.clones.push( arguments[i] );\n    \n}\n\nClones.prototype.sort = function(clones){\n    \n    var clones = clones || this.clones;\n    var collections = [];\n    \n    for( var i = 0; i < clones.length; i++ ){\n        \n        var $elements = clones[i];\n        \n        $elements.each(function(j){\n            \n            if( !collections[j] ) collections[j] = [];\n            \n            collections[j].push( $(this) );\n            \n        })\n        \n    }\n    \n    this.collections = collections;\n    this.length = collections.length;\n    \n    return this;\n\n};\n\n['find', 'filter'].forEach( function( fnName ) {\n    \n    Clones.prototype[fnName] = function( selector ){\n        \n        var elements = this.clones.map(function(clone){\n            return clone[fnName](selector);\n        })\n        \n        return this.sort( elements );\n        \n    }\n    \n});\n\n['forEach', 'map'].forEach(function(fnName){\n    \n    Clones.prototype[fnName] = function(fn){\n            \n        var collections = this.collections[fnName](function(collection, i){\n            \n            return collection[fnName](function( $element, j ){\n                \n                return fn.call( $element, i, j );\n                \n            })\n            \n        })\n        \n        if(fnName === 'map') this.collections = collections;\n        \n        return this;\n        \n    }\n    \n})\n\n\nmodule.exports = Clones;\n},{}],8:[function(require,module,exports){\nvar renderer = require('./main.js');\nvar SuperFace = require('./superFace.js');\nvar utils = require('./utils.js');\nvar scroll = require('./scroll.js');\n\nfunction Corner(options){\n    \n    this.wall1 = new SuperFace({\n        horizontal: true,\n        content: options.content\n    });\n    \n    this.wall2 = new SuperFace({\n        horizontal: true,\n        content: options.content\n    });\n    \n    this.$inner1 = this.wall1.$content.find('.info-inner');\n    this.$inner2 = this.wall2.$content.find('.info-inner');\n    \n    this.fov = options.fov;\n    this.mouseX = 0.5;\n    \n}\n\nCorner.prototype.init = function(){\n    \n    scroll.none();\n    \n    renderer.scene.add( this.wall1, this.wall2 );\n    \n    this.layout();\n    \n}\n\nCorner.prototype.layout = function( isMouse ){\n    \n    var w = window.innerWidth;\n    var h = window.innerHeight;\n    \n    var halfWidth = w/2;\n    \n    var near = -utils.perfectZ( this.fov );\n    \n    var depth = w * .25;\n    var far = near + depth;\n    var cz = -near - depth/2;\n    \n    var lefWallRatio = this.mouseX;\n    var rightWallRatio = 1 - lefWallRatio;\n    \n    var leftWallScreenWidth = lefWallRatio * w;\n    var rightWallScreenWidth = rightWallRatio  * w;\n    \n    var depthSquared = Math.pow(depth, 2);\n    \n    var leftWallWidth = Math.sqrt( depthSquared + Math.pow(leftWallScreenWidth, 2) );\n    var rightWallWidth = Math.sqrt( depthSquared + Math.pow(rightWallScreenWidth, 2) );\n    \n    this.wall1.setSize( leftWallWidth, h );\n    this.wall1.position.x = -halfWidth + leftWallScreenWidth / 2;\n    this.wall1.position.z = cz;\n    this.wall1.rotation.y = Math.atan2(-depth, leftWallScreenWidth);\n    \n    this.wall2.setSize( rightWallWidth, h );\n    this.wall2.position.x = halfWidth - rightWallScreenWidth / 2;\n    this.wall2.position.z = cz;\n    this.wall2.rotation.y = Math.atan2(depth, rightWallScreenWidth);\n    \n    if(!isMouse) {\n        this.wall1.setHeight( h );\n        this.wall2.setHeight( h );\n    }\n    \n    var totalWallWidth = leftWallWidth + rightWallWidth;\n    \n    this.wall1.$content.width( totalWallWidth );\n    this.wall2.$content.width( totalWallWidth );\n    \n    var flatAngle = Math.atan2(far, w/2);\n    var margin = depth / Math.sin(flatAngle);\n    var maxWallWidth = Math.sqrt( Math.pow(w/2, 2) + depthSquared ) * 2;\n    var innerWidth = maxWallWidth - margin * 2;\n    \n    this.$inner1.width( innerWidth );\n    this.$inner2.width( innerWidth );\n    \n    this.wall1.scroll( 0 );\n    this.wall2.scroll( leftWallWidth );\n    \n    renderer.render();\n    \n}\n\nCorner.prototype.setMouse = function(x){\n    \n    this.mouseX = x / window.innerWidth;\n    \n    this.layout( true );\n    \n}\n\nCorner.prototype.remove = function(){\n    \n    renderer.scene.remove( this.wall1, this.wall2 );\n    \n}\n\nmodule.exports = Corner;\n},{\"./main.js\":9,\"./scroll.js\":13,\"./superFace.js\":15,\"./utils.js\":18}],9:[function(require,module,exports){\nrequire('./three.cssrenderer.js');\nrequire('./zepto.plugins.js');\n\nvar renderer = new THREE.CSS3DRenderer();\nrenderer.domElement.id = 'renderer';\ndocument.body.appendChild( renderer.domElement );\n\nvar scene = new THREE.Scene();\n\nvar camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 100000);\n\nscene.add(camera);\n\nfunction setFOV(fov){\n    \n    camera.fov = fov;\n    \n    camera.updateProjectionMatrix();\n    \n}\n\nfunction render(){\n    \n    renderer.render( scene, camera );\n    \n}\n\nfunction resize(){\n    \n    var w = Math.min( window.innerWidth, document.documentElement.clientWidth );\n    var h = Math.min( window.innerHeight, document.documentElement.clientHeight );\n    \n    renderer.setSize( w, h );\n    camera.aspect = w / h;\n    camera.updateProjectionMatrix();\n    \n}\n\n$(window).on('resize', resize);\nresize();\n\nmodule.exports = {\n    \n    scene: scene,\n    \n    setFOV: setFOV,\n    \n    render: render,\n    \n    resize: resize,\n    \n    getSize: renderer.getSize\n    \n}\n},{\"./three.cssrenderer.js\":17,\"./zepto.plugins.js\":19}],10:[function(require,module,exports){\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel\n\n// MIT license\n\n(function() {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] \n                                   || window[vendors[x]+'CancelRequestAnimationFrame'];\n    }\n \n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function(callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); }, \n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n \n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n}());\n\t\nvar funcs = {};\n\nvar funcCount = 0;\n\nvar frame = false;\n\nvar then;\n\nfunction tick(){\n\t\n\tframe = requestAnimationFrame(tick);\n\t\n\tvar now = Date.now();\n\tvar dT = now - then;\n\t\n\tfor(var name in funcs){\n\t\tif( funcs[name](now, dT) === false ){\n\t\t\tstop(name);\n\t\t};\n\t}\n\t\n\tthen = now;\n\t\n}\n\nfunction start(name, fn){\n\t\n\tif(!fn){\n\t\tfn = name;\n\t\tname = Math.random().toString();\n\t}\n\t\n\tif(funcs[name]) return false;\n\t\n\tfuncs[name] = fn;\n\t\n\tfuncCount++;\n\t\n\tif(!frame){\n\t\tthen = Date.now();\n\t\tframe = requestAnimationFrame(tick);\n\t}\n\t\n}\n\nfunction stop(name){\n\t\n\tif(name){\n\t\tdelete funcs[name];\n\t\tfuncCount--;\n\t} else {\n\t\tfuncs = {};\n\t\tfuncCount = 0;\n\t}\n\t\n\tif( funcCount === 0 ){\n\t\tcancelAnimationFrame(frame);\n\t\tframe = false;\n\t}\n\n\t\n}\n\nmodule.exports =  {\n\tstart: start,\n\tstop: stop\n}\n},{}],11:[function(require,module,exports){\nfunction ResizableCSS3DObject($element){\n    \n    this.$element = $element;\n    \n    THREE.CSS3DObject.call(this, this.$element[0]);\n    \n}\n\nResizableCSS3DObject.prototype = Object.create( THREE.CSS3DObject.prototype );\nResizableCSS3DObject.prototype.constructor = THREE.CSS3DObject;\n\nResizableCSS3DObject.prototype.resize = function(w, h){\n    this.w = w;\n    this.h = h;\n    this.halfHeight = this.h/2;\n    this.$element.css({\n        width: w,\n        height: h\n    })\n}\n\nmodule.exports = ResizableCSS3DObject;\n},{}],12:[function(require,module,exports){\nvar renderer = require('./main.js');\nvar SuperFace = require('./superFace.js');\nvar utils = require('./utils.js');\nvar scroll = require('./scroll.js');\nvar margin = require('../metrics.js').menuMargin;\n\nfunction Room(options){\n    \n    this.horizontal = options.horizontal;\n    this.fov = options.fov;\n    this.content = options.content;\n    \n    var faceOptions = {\n        horizontal: this.horizontal,\n        content: this.content\n    }\n    \n    this.wall1 = new SuperFace( faceOptions );\n    this.wall2 = new SuperFace( faceOptions );\n    \n    if(this.horizontal){\n        \n        this.wall1.rotation.y = Math.PI / 2;\n        this.wall2.rotation.y = -Math.PI / 2;\n\n    } else {\n        \n        this.wall1.rotation.x = Math.PI / 2;\n        this.wall2.rotation.x = -Math.PI / 2;\n\n    }\n    \n    this.depth = 0;\n    this.size = 0;\n    \n    var self = this;\n    \n    this.content.find('img').each(function(i){\n        this.onload = function(){\n            self.setScrollSize();\n        };\n    })\n    \n}\n\nRoom.prototype.init = function( element ){\n    \n    renderer.setFOV( this.fov );\n    renderer.scene.add( this.wall1, this.wall2 );\n    element.append( this.content );\n    element.appendTo( 'body' );\n    this.layout();\n    this.scroll( 0 );\n    \n}\n\n    \nRoom.prototype.layout = function(){\n    \n    this.setScrollSize();\n        \n    var m = margin();\n    \n    var size = renderer.getSize();\n    \n    var w = size.width - m * 2;\n    var h = size.height - m * 2;\n    \n    var far = utils.perfectZ( this.fov );\n    var fovX = utils.fovX( this.fov );\n    \n    var depth = Math.max(\n        m / Math.tan( THREE.Math.degToRad( this.fov / 2) ),\n        m / Math.tan( THREE.Math.degToRad( fovX / 2) )\n    );\n    \n    var cz = far + depth/2;\n    \n    this.wall1.position.z = cz;\n    this.wall2.position.z = cz;\n    \n    if ( this.horizontal ) {\n        \n        this.wall1.position.x = -w/2;\n        this.wall1.setSize( depth, h );\n        \n        this.wall2.position.x = w/2;\n        this.wall2.setSize( depth, h );\n        \n    } else {\n        \n        this.wall1.position.y = h/2;\n        this.wall1.setSize( w, depth );\n        \n        this.wall2.position.y = -h/2;\n        this.wall2.setSize( w, depth );\n        \n    }\n    \n    this.depth = depth;\n    this.size = this.horizontal ? w : h;\n    \n    renderer.render();\n     \n}\n\nRoom.prototype.setScrollSize = function(){\n    \n    if( this.horizontal ){\n        \n        scroll.setX( this.content.width() );\n        \n    } else {\n        \n        scroll.setY( this.content.height() + this.depth * 2 );\n        \n    }\n    \n    renderer.resize();\n    \n}\n    \nRoom.prototype.scroll = function(s){\n        \n    if(s === undefined){\n        s = this.wall1.scrollTop;\n    } else {\n        s -= this.depth;\n    }\n    \n    this.wall1.scroll( s );\n    \n    if(this.horizontal){\n        \n        this.content.translate( -s - this.depth, 0 );\n        \n    } else {\n        \n        this.content.translate( 0, -s - this.depth );\n    }\n    \n    this.wall2.scroll( s + this.depth + this.size );\n    \n}\n\nRoom.prototype.remove = function(){\n    \n    renderer.scene.remove( this.wall1, this.wall2 );\n    \n    this.content.parent().detach();\n    this.content.detach();\n    \n}\n\nmodule.exports = Room;\n},{\"../metrics.js\":5,\"./main.js\":9,\"./scroll.js\":13,\"./superFace.js\":15,\"./utils.js\":18}],13:[function(require,module,exports){\nvar sizer = $('<div class=\"sizer\">')\nvar body = $('body');\n\nbody.append( sizer );\n\nvar horizontal = false;\n\ndocument.body.addEventListener('mousewheel', function(e){\n    \n    if ( horizontal ) {\n        \n        e.preventDefault();\n        \n        window.scrollBy( e.deltaY + e.deltaX, 0 );\n        \n    }\n    \n})\n\nmodule.exports = {\n    setX: function(x){\n        horizontal = true;\n        sizer.css({\n            width: x,\n            height: '100%'\n        })\n        body.css({\n            overflowX: 'scroll',\n            overflowY: 'hidden'\n        })\n    },\n    setY: function(y){\n        horizontal = false;\n        sizer.css({\n            height: y,\n            width: '100%'\n        })\n        body.css({\n            overflowY: 'scroll',\n            overflowX: 'hidden'\n        })\n        \n    },\n    none: function(){\n        horizontal = false;\n        sizer.css({\n            height: '100%',\n            width: '100%'\n        })\n        body.css({\n            overflowX: 'hidden',\n            overflowY: 'hidden'\n        })\n    }\n}\n},{}],14:[function(require,module,exports){\nvar renderer = require('./main.js');\nvar utils = require('./utils.js');\nvar scroll = require('./scroll.js');\nvar rAF = require('./rAF.js');\n\nvar SuperSingleton = require('./superSingleton.js');\nvar ResizableCSS3DObject = require(\"./resizableCSS3DObject.js\");\nvar Clones = require('./clones.js');\n\nvar sides = ['top', 'left', 'bottom', 'right'];\n\nfunction Showcase(options){\n    \n\tvar $projectTitleText = options.logo.find('.home-logo__project-title');\n\tvar $clientText = options.logo.find('.home-logo__client');\n    \n    this.fov = options.fov;\n    \n    var $logo = options.logo;\n    this.logo = new ResizableCSS3DObject( $logo );\n    \n    this.imgs = new Clones( options.imgs, options.imgs.clone(), options.imgs.clone(), options.imgs.clone() )\n        .sort()\n        .map(function( imgIndex, sideIndex ){\n        \n            var $img = this;\n            \n            var title = $img.data('title')\n            var client = $img.data('client');\n            \n            if( title ) {\n            \n                $img.mouseenter(function(){\n                    \n            \t\t$logo.addClass('home-logo_show-project-title')\n        \t\t\t$projectTitleText.text( title );\n        \t\t\t$clientText.text( client );\n                    \n                }).mouseleave(function(){\n                    \n                    $logo.removeClass('home-logo_show-project-title');\n                    \n                })\n            \n            }\n            \n            var img3d = new SuperSingleton({\n                $element: $img,\n                axis: sideIndex % 2 === 0 ? 'x' : 'y'\n            });\n            \n            switch( sides[sideIndex] ) {\n                \n                case 'top':\n                    img3d.rotation.x = Math.PI / 2;\n                    img3d.rotation.z = Math.PI / 2;\n                    break;\n                    \n                case 'left':\n                    img3d.rotation.y = Math.PI / 2;\n                    img3d.rotation.x = Math.PI;\n                    break;\n                    \n                case 'bottom':\n                    img3d.rotation.x = -Math.PI / 2;\n                    img3d.rotation.z = -Math.PI / 2;\n                    break;\n                    \n                case 'right':\n                    img3d.rotation.y = -Math.PI / 2;\n                    break;\n                \n            }\n            \n            return img3d;\n            \n        });\n    \n    this.imgs.collections.forEach(function(imgClones, i, list){\n        \n        var x = Math.random();\n        var y = i / list.length;\n        \n        imgClones.forEach(function(img){\n            \n            img.contentOffset = {\n                x: x,\n                y: y\n            }\n            \n        });\n        \n    });\n    \n    this.prevMouse = new THREE.Vector2();\n    this.mouse = new THREE.Vector2();\n    this.slowedMouse = new THREE.Vector2();\n    \n}\n\nShowcase.prototype.init = function(){\n    \n    renderer.scene.add( this.logo );\n    \n    scroll.none();\n    \n    this.startTime = Date.now();\n    \n    this.layout();\n    \n    rAF.start( this.tick.bind(this) );\n    \n}\n\nShowcase.prototype.layout = function(){\n    \n    var w = window.innerWidth;\n    var h = window.innerHeight;\n    \n    var near = utils.perfectZ( this.fov );\n    var depth = Math.min(w, h);\n    \n    var far = near - depth;\n    \n    this.logo.resize(w, h);\n    this.logo.position.z = far;\n    \n    var halfW = w/2;\n    var halfH = h/2;\n    var cz = (near + far) / 2;\n    \n    var perimiter = h*2 + w*2;\n    \n    var maxImageHeight = Math.min(h, w) / 2;\n    \n    this.imgs.forEach(function(imgIndex, sideIndex){\n        \n        var img = this;\n        \n        var imgW, imgH;\n        \n        if ( img.nativeHeight > maxImageHeight ) {\n           \n           imgW = (maxImageHeight / img.nativeHeight) * img.nativeWidth;\n           imgH = maxImageHeight;\n            \n        } else {\n            \n            imgW = img.nativeWidth;\n            imgH = img.nativeHeight;\n            \n        }\n        \n        img.resize( imgW, imgH );\n        \n        img.getZ( near, far );\n        img.setContentSize( depth, perimiter );\n        \n        var depthOffset = imgIndex / 20;\n        \n        switch( sides[ sideIndex ] ) {\n            \n            case 'top':\n                img.position.y = halfH - depthOffset;\n                img.setAxisLimits( halfW, -halfW );\n                img.scrollOffset = 0;\n                img.scrollHeight = w;\n                break;\n                \n            case 'left':\n                img.position.x = -halfW + depthOffset;\n                img.setAxisLimits( halfH, -halfH );\n                img.scrollOffset = w;\n                img.scrollHeight = h;\n                break;\n                \n            case 'bottom':\n                img.position.y = -halfH + depthOffset;\n                img.setAxisLimits( -halfW, halfW );\n                img.scrollOffset = w + h;\n                img.scrollHeight = w;\n                break;\n                \n            case 'right':\n                img.position.x = halfW - depthOffset;\n                img.setAxisLimits( -halfH, halfH );\n                img.scrollOffset = w + h + w;\n                img.scrollHeight = h;\n                break;\n                \n            \n        }\n        \n        img.setScroll(0, renderer.scene);\n        \n    });\n    \n}\n\nShowcase.prototype.setMouse = function(x, y){\n    this.mouse.x = x - window.innerWidth / 2;\n    this.mouse.y = -(y - window.innerHeight / 2);\n}\n\nShowcase.prototype.remove = function(){\n    \n    rAF.stop();\n    \n    renderer.scene.remove(this.logo);\n    \n    this.imgs.forEach(function(){\n        this.detach( renderer.scene );\n    })\n    \n}\n\nShowcase.prototype.tick = function(now){\n    \n    var showcase = this;\n    \n    var elapsed = now - this.startTime;\n    \n    this.slowedMouse.x = this.prevMouse.x + ( this.mouse.x - this.prevMouse.x ) * 0.1;\n    this.slowedMouse.y = this.prevMouse.y + ( this.mouse.y - this.prevMouse.y ) * 0.1;\n    \n    var perimiter = window.innerHeight * 2 + window.innerWidth * 2;\n    \n    var scrollTop = (elapsed / 10) % perimiter;\n    \n    this.imgs.forEach(function(){\n        this.setScroll( scrollTop, renderer.scene );\n        this.setOpacity( showcase.slowedMouse );\n    })\n    \n    renderer.render();\n    \n    this.prevMouse.copy( this.slowedMouse );\n    \n}\n\nmodule.exports = Showcase;\n},{\"./clones.js\":7,\"./main.js\":9,\"./rAF.js\":10,\"./resizableCSS3DObject.js\":11,\"./scroll.js\":13,\"./superSingleton.js\":16,\"./utils.js\":18}],15:[function(require,module,exports){\nfunction SuperFace(options){\n    \n    this.$element = SuperFace.$model.clone();\n    \n    this.horizontal = options.horizontal;\n    this.$content = options.content.clone();\n    this.$element.append( this.$content );\n    \n    THREE.CSS3DObject.call(this, this.$element[0]);\n    \n}\n\nSuperFace.prototype = Object.create( THREE.CSS3DObject.prototype );\nSuperFace.prototype.constructor = THREE.CSS3DObject;\n\nSuperFace.prototype.setSize = function( w, h ) {\n    \n    if( w !== undefined ) this.setWidth( w );\n    if( h !== undefined ) this.setHeight( h );\n\n}\n\nSuperFace.prototype.setWidth = function(w){\n    \n    //if(w === this.w) return;\n    \n    if(this.horizontal) w++;\n    this.$element.width( w );\n    this.w = w;\n    \n}\n\nSuperFace.prototype.setHeight = function(h){\n    \n    //if(h === this.h) return;\n    \n    if(!this.horizontal) h++;\n    this.$element.height( h );\n    this.h = h;\n\n}\n\nSuperFace.prototype.scroll = function(to){\n    \n    if( to === this.scrollTop ) return;\n    \t\n    if(this.horizontal){\n        this.$content.translate( -to, 0 );\n        //this.$content[0].style.transform = 'translate3d(' + Math.round(-this.scrollTop) + 'px, 0, 0)';\n        //this.$content.css('transform', 'translate3d(' + (-to + 'px') + ', 0, 0)');\n\t} else {\n\t    this.$content.translate( 0, -to );\n\t    //this.$content[0].style.transform = 'translate3d(0, ' + Math.round(-this.scrollTop) + 'px, 0)';\n\t    //this.$content.css('transform', 'translate3d(0, ' + (-to + 'px') + ', 0)');\n\t}\n\t\n\tthis.scrollTop = to;\n\t\n}\n\nSuperFace.$model = $('<div class=\"super-face\"></div>');\n\nmodule.exports = SuperFace;\n},{}],16:[function(require,module,exports){\nvar ResizableCSS3DObject = require('./resizableCSS3DObject.js');\n\nfunction normalize(x, min, max){\n\treturn (x-min) / (max-min);\n}\n\nfunction scale(x, oldMin, oldMax, newMin, newMax){\n    if( !(oldMin === 0 && oldMax === 1) ){\n        x = normalize(x, oldMin, oldMax);\n    }\n    return newMin + x * (newMax - newMin);\n}\n\nfunction SuperSingleton(options){\n    \n    _.extend(this, options);\n    \n    this.attached = false;\n    this.cropped = false;\n    \n    this.nativeWidth = this.$element.data('width');\n    this.nativeHeight = this.$element.data('height');\n    \n    ResizableCSS3DObject.call(this, this.$element);\n    \n}\n\nSuperSingleton.prototype = Object.create( ResizableCSS3DObject.prototype );\nSuperSingleton.prototype.constructor = ResizableCSS3DObject;\n\nSuperSingleton.prototype.getZ = function(min, max){\n    \n    if(min < 0){\n        min += this.w/2;\n    } else {\n        min -= this.w/2;\n    }\n    \n    if(max <= 0){\n        max += this.w / 2;\n    } else {\n        max -= this.w / 2;\n    }\n    \n    this.position.z = scale(this.contentOffset.x, 0, 1, min - this.w/2, max + this.w/2);\n}\n\nSuperSingleton.prototype.setContentSize = function(w, h){\n    var centerY = scale(this.contentOffset.y, 0, 1, this.h/2, h - this.h/2);\n    this.bounds = {\n        center: centerY,\n        top: centerY - this.h/2,\n        bottom: centerY + this.h/2\n    };\n    this.contentHeight = h;\n}\n\nSuperSingleton.prototype.setAxisLimits = function(min, max){\n    \n    var halfHeight = this.h/2;\n    \n    this.axisMin = min;\n    this.axisMax = max;\n    \n    this.cropMin = min > 0 ? min - halfHeight + 1 : min + halfHeight - 1;\n    this.cropMax = max > 0 ? max - halfHeight + 1 : max + halfHeight - 1;\n}\n\nSuperSingleton.prototype.attach = function(scene){\n    if(this.attached) return;\n    scene.add(this);\n    this.attached = true;\n}\n\nSuperSingleton.prototype.detach = function(scene){\n    if(!this.attached) return;\n    scene.remove(this);\n    this.attached = false;\n}\n\nSuperSingleton.prototype.crop = function(){\n    \n    var position = this.position[this.axis];\n    \n    var cropTop = 0\n    var cropBottom = 0;\n    \n    if(this.cropMax > 0){\n        if(position > this.cropMax) cropTop = position - this.cropMax;\n    } else {\n        if(position < this.cropMax) cropTop = this.cropMax - position;\n    }\n    \n    if(this.cropMin > 0){\n        if(position > this.cropMin) cropBottom = position - this.cropMin;\n    } else {\n        if(position < this.cropMin) cropBottom = this.cropMin - position;\n    }\n    \n    var h = this.h - cropTop - cropBottom;\n    \n    if(cropTop){\n        this.$element.css('height', h)\n        this.position[this.axis] += this.cropMax > 0 ? -cropTop/2 : cropTop/2;\n        if(this.cropped !== 'top'){\n            this.$element.css('backgroundPosition', 'center bottom')\n        }\n        this.cropped = 'top';\n    } else if(cropBottom){\n        this.$element.css('height', h);\n        this.position[this.axis] += this.cropMin < 0 ? cropBottom/2 : -cropBottom/2;\n        if(this.cropped !== 'bottom'){\n            this.$element.css('backgroundPosition', 'center top');\n        }\n        this.cropped = 'bottom';\n    } else {\n        if(this.cropped){\n            this.$element.css({\n                backgroundPosition: 'center center',\n                height: this.h\n            })\n        }\n        this.cropped = false;\n    }\n    \n}\n\nSuperSingleton.prototype.setScroll = function(top, scene){\n    \n    top += this.scrollOffset;\n    var bottom = top + this.scrollHeight;\n\n    if( top < this.bounds.bottom && bottom > this.bounds.top ){\n        this.attach(scene);\n        this.position[this.axis] = scale(this.bounds.center, top, bottom, this.axisMin, this.axisMax);\n        this.crop();\n    } else if (\n        bottom > this.contentHeight &&\n            ( top - this.contentHeight < this.bounds.bottom && bottom - this.contentHeight > this.bounds.top )\n    ){\n        this.attach(scene);\n        this.position[this.axis] = scale(this.bounds.center, top - this.contentHeight, bottom - this.contentHeight, this.axisMin, this.axisMax);\n        this.crop();\n    } else {\n        this.detach(scene);\n    }\n    \n}\n\nSuperSingleton.prototype.setOpacity = function(cursor){\n    \n    if(window.innerWidth <= 768) return;\n    \n    var distance = new THREE.Vector2(this.position.x, this.position.y).distanceTo(cursor);\n    \n    var min = window.innerWidth * .1;\n    var max = window.innerWidth * 0.75;\n    \n    this.$element.css('opacity', scale(distance, min, max, 1, 0) );\n    \n}\n\nmodule.exports = SuperSingleton;\n},{\"./resizableCSS3DObject.js\":11}],17:[function(require,module,exports){\n/**\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CSS3DObject = function ( element ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.element = element;\n\tthis.element.style.position = 'absolute';\n\n\tthis.addEventListener( 'removed', function ( event ) {\n\n\t\tif ( this.element.parentNode !== null ) {\n\n\t\t\tthis.element.parentNode.removeChild( this.element );\n\n\t\t}\n\n\t} );\n\n};\n\nTHREE.CSS3DObject.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject;\n\nTHREE.CSS3DSprite = function ( element ) {\n\n\tTHREE.CSS3DObject.call( this, element );\n\n};\n\nTHREE.CSS3DSprite.prototype = Object.create( THREE.CSS3DObject.prototype );\nTHREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite;\n\n//\n\nTHREE.CSS3DRenderer = function () {\n\n\tconsole.log( 'THREE.CSS3DRenderer', THREE.REVISION );\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar matrix = new THREE.Matrix4();\n\n\tvar cache = {\n\t\tcamera: { fov: 0, style: '' },\n\t\tobjects: {}\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tdomElement.style.WebkitTransformStyle = 'preserve-3d';\n\tdomElement.style.MozTransformStyle = 'preserve-3d';\n\tdomElement.style.oTransformStyle = 'preserve-3d';\n\tdomElement.style.transformStyle = 'preserve-3d';\n\n\tthis.domElement = domElement;\n\n\tvar cameraElement = document.createElement( 'div' );\n\n\tcameraElement.style.WebkitTransformStyle = 'preserve-3d';\n\tcameraElement.style.MozTransformStyle = 'preserve-3d';\n\tcameraElement.style.oTransformStyle = 'preserve-3d';\n\tcameraElement.style.transformStyle = 'preserve-3d';\n\n\tdomElement.appendChild( cameraElement );\n\n\tthis.setClearColor = function () {};\n\n\tthis.getSize = function() {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t\tcameraElement.style.width = width + 'px';\n\t\tcameraElement.style.height = height + 'px';\n\n\t};\n\n\tvar epsilon = function ( value ) {\n\t\t\n\t\t// adding the = fixes mobile safari\n\t\t\n\t\treturn Math.abs( value ) <= Number.EPSILON ? 0 : value;\n\n\t};\n\n\tvar getCameraCSSMatrix = function ( matrix ) {\n\n\t\tvar elements = matrix.elements;\n\n\t\treturn 'matrix3d(' +\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\tepsilon( elements[ 15 ] ) +\n\t\t')';\n\n\t};\n\n\tvar getObjectCSSMatrix = function ( matrix ) {\n\n\t\tvar elements = matrix.elements;\n\n\t\treturn 'translate3d(-50%,-50%,0) matrix3d(' +\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\tepsilon( elements[ 15 ] ) +\n\t\t')';\n\n\t};\n\n\tvar renderObject = function ( object, camera ) {\n\n\t\tif ( object instanceof THREE.CSS3DObject ) {\n\n\t\t\tvar style;\n\n\t\t\tif ( object instanceof THREE.CSS3DSprite ) {\n\n\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\tmatrix.copy( camera.matrixWorldInverse );\n\t\t\t\tmatrix.transpose();\n\t\t\t\tmatrix.copyPosition( object.matrixWorld );\n\t\t\t\tmatrix.scale( object.scale );\n\n\t\t\t\tmatrix.elements[ 3 ] = 0;\n\t\t\t\tmatrix.elements[ 7 ] = 0;\n\t\t\t\tmatrix.elements[ 11 ] = 0;\n\t\t\t\tmatrix.elements[ 15 ] = 1;\n\n\t\t\t\tstyle = getObjectCSSMatrix( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld );\n\n\t\t\t}\n\n\t\t\tvar element = object.element;\n\t\t\tvar cachedStyle = cache.objects[ object.id ];\n\n\t\t\tif ( cachedStyle === undefined || cachedStyle !== style ) {\n\n\t\t\t\telement.style.WebkitTransform = style;\n\t\t\t\telement.style.MozTransform = style;\n\t\t\t\telement.style.oTransform = style;\n\t\t\t\telement.style.transform = style;\n\t\t\t\t\n\t\t\t\tcache.objects[ object.id ] = style;\n\n\t\t\t}\n\n\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], camera );\n\n\t\t}\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tvar fov = 0.5 / Math.tan( THREE.Math.degToRad( camera.fov * 0.5 ) ) * _height;\n\n\t\tif ( cache.camera.fov !== fov ) {\n\n\t\t\tdomElement.style.WebkitPerspective = fov + \"px\";\n\t\t\tdomElement.style.MozPerspective = fov + \"px\";\n\t\t\tdomElement.style.oPerspective = fov + \"px\";\n\t\t\tdomElement.style.perspective = fov + \"px\";\n\n\t\t\tcache.camera.fov = fov;\n\n\t\t}\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\tvar style = \"translate3d(0,0,\" + fov + \"px)\" + getCameraCSSMatrix( camera.matrixWorldInverse ) +\n\t\t\t\" translate3d(\" + _widthHalf + \"px,\" + _heightHalf + \"px, 0)\";\n\n\t\tif ( cache.camera.style !== style ) {\n\n\t\t\tcameraElement.style.WebkitTransform = style;\n\t\t\tcameraElement.style.MozTransform = style;\n\t\t\tcameraElement.style.oTransform = style;\n\t\t\tcameraElement.style.transform = style;\n\n\t\t\tcache.camera.style = style;\n\n\t\t}\n\n\t\trenderObject( scene, camera );\n\n\t};\n\n};\n},{}],18:[function(require,module,exports){\nvar renderer = require('./main.js');\n\nmodule.exports = {\n    \n    perfectZ: function (fov){\n        return -( renderer.getSize().height /2) / Math.tan( THREE.Math.degToRad( fov / 2 ) );\n    },\n    \n    fovX: function (fovY){\n        \n        var size = renderer.getSize();\n        \n        var fovY_rad = THREE.Math.degToRad( fovY );\n        var aspect = size.width / size.height;\n        \n        var fovX_rad = 2 * Math.atan( aspect * Math.tan( fovY_rad / 2) );\n        \n        return THREE.Math.radToDeg( fovX_rad );\n        \n    }\n    \n}\n},{\"./main.js\":9}],19:[function(require,module,exports){\n/*! modernizr 3.3.1 (Custom Build) | MIT *\n * https://modernizr.com/download/?-prefixed-setclasses !*/\n!function(e,n,t){function r(e,n){return typeof e===n}function o(){var e,n,t,o,i,s,a;for(var f in g)if(g.hasOwnProperty(f)){if(e=[],n=g[f],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(o=r(n.fn,\"function\")?n.fn():n.fn,i=0;i<e.length;i++)s=e[i],a=s.split(\".\"),1===a.length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),y.push((o?\"\":\"no-\")+a.join(\"-\"))}}function i(e){var n=_.className,t=Modernizr._config.classPrefix||\"\";if(w&&(n=n.baseVal),Modernizr._config.enableJSClass){var r=new RegExp(\"(^|\\\\s)\"+t+\"no-js(\\\\s|$)\");n=n.replace(r,\"$1\"+t+\"js$2\")}Modernizr._config.enableClasses&&(n+=\" \"+t+e.join(\" \"+t),w?_.className.baseVal=n:_.className=n)}function s(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,\"\")}function a(e,n){return!!~(\"\"+e).indexOf(n)}function f(){return\"function\"!=typeof n.createElement?n.createElement(arguments[0]):w?n.createElementNS.call(n,\"http://www.w3.org/2000/svg\",arguments[0]):n.createElement.apply(n,arguments)}function l(e,n){return function(){return e.apply(n,arguments)}}function u(e,n,t){var o;for(var i in e)if(e[i]in n)return t===!1?e[i]:(o=n[e[i]],r(o,\"function\")?l(o,t||n):o);return!1}function p(e){return e.replace(/([A-Z])/g,function(e,n){return\"-\"+n.toLowerCase()}).replace(/^ms-/,\"-ms-\")}function d(){var e=n.body;return e||(e=f(w?\"svg\":\"body\"),e.fake=!0),e}function c(e,t,r,o){var i,s,a,l,u=\"modernizr\",p=f(\"div\"),c=d();if(parseInt(r,10))for(;r--;)a=f(\"div\"),a.id=o?o[r]:u+(r+1),p.appendChild(a);return i=f(\"style\"),i.type=\"text/css\",i.id=\"s\"+u,(c.fake?c:p).appendChild(i),c.appendChild(p),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(n.createTextNode(e)),p.id=u,c.fake&&(c.style.background=\"\",c.style.overflow=\"hidden\",l=_.style.overflow,_.style.overflow=\"hidden\",_.appendChild(c)),s=t(p,e),c.fake?(c.parentNode.removeChild(c),_.style.overflow=l,_.offsetHeight):p.parentNode.removeChild(p),!!s}function m(n,r){var o=n.length;if(\"CSS\"in e&&\"supports\"in e.CSS){for(;o--;)if(e.CSS.supports(p(n[o]),r))return!0;return!1}if(\"CSSSupportsRule\"in e){for(var i=[];o--;)i.push(\"(\"+p(n[o])+\":\"+r+\")\");return i=i.join(\" or \"),c(\"@supports (\"+i+\") { #modernizr { position: absolute; } }\",function(e){return\"absolute\"==getComputedStyle(e,null).position})}return t}function v(e,n,o,i){function l(){p&&(delete N.style,delete N.modElem)}if(i=r(i,\"undefined\")?!1:i,!r(o,\"undefined\")){var u=m(e,o);if(!r(u,\"undefined\"))return u}for(var p,d,c,v,h,y=[\"modernizr\",\"tspan\",\"samp\"];!N.style&&y.length;)p=!0,N.modElem=f(y.shift()),N.style=N.modElem.style;for(c=e.length,d=0;c>d;d++)if(v=e[d],h=N.style[v],a(v,\"-\")&&(v=s(v)),N.style[v]!==t){if(i||r(o,\"undefined\"))return l(),\"pfx\"==n?v:!0;try{N.style[v]=o}catch(g){}if(N.style[v]!=h)return l(),\"pfx\"==n?v:!0}return l(),!1}function h(e,n,t,o,i){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+\" \"+S.join(s+\" \")+s).split(\" \");return r(n,\"string\")||r(n,\"undefined\")?v(a,n,o,i):(a=(e+\" \"+E.join(s+\" \")+s).split(\" \"),u(a,n,t))}var y=[],g=[],C={_version:\"3.3.1\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){g.push({name:e,fn:n,options:t})},addAsyncTest:function(e){g.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=C,Modernizr=new Modernizr;var _=n.documentElement,w=\"svg\"===_.nodeName.toLowerCase(),x=\"Moz O ms Webkit\",S=C._config.usePrefixes?x.split(\" \"):[];C._cssomPrefixes=S;var b=function(n){var r,o=prefixes.length,i=e.CSSRule;if(\"undefined\"==typeof i)return t;if(!n)return!1;if(n=n.replace(/^@/,\"\"),r=n.replace(/-/g,\"_\").toUpperCase()+\"_RULE\",r in i)return\"@\"+n;for(var s=0;o>s;s++){var a=prefixes[s],f=a.toUpperCase()+\"_\"+r;if(f in i)return\"@-\"+a.toLowerCase()+\"-\"+n}return!1};C.atRule=b;var E=C._config.usePrefixes?x.toLowerCase().split(\" \"):[];C._domPrefixes=E;var z={elem:f(\"modernizr\")};Modernizr._q.push(function(){delete z.elem});var N={style:z.elem.style};Modernizr._q.unshift(function(){delete N.style}),C.testAllProps=h;C.prefixed=function(e,n,t){return 0===e.indexOf(\"@\")?b(e):(-1!=e.indexOf(\"-\")&&(e=s(e)),n?h(e,n,t):h(e,\"pfx\"))};o(),i(y),delete C.addTest,delete C.addAsyncTest;for(var P=0;P<Modernizr._q.length;P++)Modernizr._q[P]();e.Modernizr=Modernizr}(window,document);\n\nfunction videoUrlToEmbed(url){\n\t\n\tvar vimeoRe = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n\tvar youtubeRe = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*/;\n\tvar match, id;\n\t\n\tif(url.indexOf('vimeo') > -1){\n\t\tmatch = url.match(vimeoRe);\n\t\tid = match[3];\n\t\treturn 'https://player.vimeo.com/video/' + id;\n\t} else {\n\t\tmatch = url.match(youtubeRe);\n\t\tid = match[7];\n\t\treturn \"//www.youtube.com/embed/\" + id + \"?showinfo=0\";\n\t}\n\t\n}\n\nvar PREFIXED_TRANSFORM = Modernizr.prefixed('transform');\n\nvar $window = $('window');\n\n$.fn.translate = function(x, y){\n    \n    this[0].style[PREFIXED_TRANSFORM] = 'translate(' + x + 'px, ' + y + 'px)';\n    \n}\n\nvar sizes = {\n    small: 300,\n    medium: 600,\n    large: 1200,\n    xlarge: 2000\n}\n\nvar DPR = window.devicePixelRatio || 1;\n\n$.fn.loadImages = function(){\n    \n    var el = this.hasClass('rsp-img') ? this : this.find('.rsp-img');\n    \n    el.each(function(){\n        \n        var $this = $(this);\n        \n        function go(){\n            \n            function setSrc(size){\n                \n                var src = $this.data('src-' + size);\n                \n                if( $this.is('img') ) {\n                    $this.attr('src', src);\n                } else {\n                    $this.css('background-image', 'url(' + src + ')');\n                }\n                \n            }\n            \n            var w = $this.width() * DPR;\n            \n            for(var size in sizes){\n                \n                if( w < sizes[size] ) {\n                    setSrc( size );\n                    return;\n                }\n                \n            }\n            \n            setSrc('xlarge');\n            \n        }\n        \n        go();\n        \n        $window.on('resize', go);\n        \n        /*\n        $window.on('routechange', function(){\n            $window.off('resize', go);\n        })\n        */\n        \n    })\n    \n}\n\n$.fn.loadVideo = function(){\n    \n    this.each(function(){\n        var $this = $(this);\n        var videoUrl = $this.data('video-url');\n        var $iframe = $('<iframe>');\n        $iframe.attr({\n            src: videoUrlToEmbed(videoUrl),\n            width: '100%',\n            height: '100%'\n        });\n        $this.append( $iframe );\n    })    \n    \n}\n},{}],20:[function(require,module,exports){\nmodule.exports = {\n    \n    element: 'main',\n    \n    routes: {\n        '/': 'home',\n        '/work': 'work',\n        '/archive': 'work',\n        '/info': 'info',\n        '/project/:slug': 'project',\n        '/post/:slug': 'post'\n    }\n    \n}\n},{}],21:[function(require,module,exports){\nvar handlers = {};\n\nfunction on(evts){\n    \n    for ( var name in evts ) {\n        \n        if( !handlers[ name ] ) handlers[ name ] = [];\n        \n        handlers[ name ].push( evts[ name ] );\n        \n    }\n    \n}\n\nfunction off(){\n    \n    handlers = {};\n    \n}\n\nfunction trigger(evt){\n    \n    var fns = handlers[evt];\n    \n    if( !fns ) return;\n    \n    var args = [];\n    \n    for(var i = 1; i < arguments.length; i++) args.push( arguments[i] );\n    \n    var ret, result;\n    \n    for ( var i = 0; i < fns.length; i++ ) {\n        \n        ret = fns[i].apply(null, args);\n        \n        if( result !== ret ) result = ret;\n        \n    }\n    \n    return result;\n    \n}\n\n$(window)\n    .on( 'scroll', trigger.bind( null, 'scroll' ) )\n    .on( 'resize', trigger.bind( null, 'resize' ) )\n    .on( 'mousemove', trigger.bind( null, 'mousemove' ) )\n\nmodule.exports = {\n    on: on,\n    off: off,\n    trigger: trigger\n}\n},{}],22:[function(require,module,exports){\nvar config = require('./config.js')\nconfig.$element = $(config.element);\n\nvar common = require('./routes/common.js');\nvar home = require('./routes/home.js');\nvar info = require('./routes/info.js');\nvar work = require('./routes/work.js');\nvar project = require('./routes/project.js');\n\nmodule.exports = function(){\n    \n    if( !$('body').hasClass('holding') ) page.base('/index.php');\n    page( '*', common.getTemplate, common.transitionOut, common.go );\n    page( '/', home );\n    page( '/home', home );\n    page( '/info', info );\n    page( '/work', work );\n    page( '/project/:slug', project );\n    page( '/archive', work );\n    page( '/services-unknown', work );\n    page( '/post/:slug', project );\n    page();\n    \n};\n},{\"./config.js\":20,\"./routes/common.js\":23,\"./routes/home.js\":24,\"./routes/info.js\":25,\"./routes/project.js\":26,\"./routes/work.js\":27}],23:[function(require,module,exports){\nmodule.exports = {\n    getTemplate: getTemplate,\n    transitionOut: transitionOut,\n    go: go\n};\n\nvar config = require('../config.js')\nvar selector = config.element;\nvar routes = config.routes;\nvar $element = config.$element;\nvar $window = $(window);\nvar $loading = $('.loading');\n\nvar events = require('../events.js');\n\nvar $htmlBody = $('html, body');\nvar $body = $('body');\n\nvar firstLoad = require('../../firstLoad.js');\n\nvar templateCache = {};\n\nfunction saveTemplate(html, ctx){\n    \n    var template = $(html).filter(selector).children();\n    \n    ctx.template = templateCache[ ctx.path ] = template;\n\n}\n\n function getTemplate(ctx, next){\n     \n     $loading.addClass('on');\n    \n    var cached = templateCache[ ctx.path ];\n    \n    if( cached ) {\n        \n        ctx.template = cached;\n\n        next();\n        \n    } else if( firstLoad.is ) {\n        \n        saveTemplate( document.documentElement.innerHTML, ctx );\n        \n        $element.empty().detach();\n        \n        next();\n        \n    } else {\n    \n        $.get( ctx.path, function(response){\n            \n            saveTemplate( response, ctx );\n            \n            next();\n            \n        })\n        \n    }\n    \n}\n\nfunction transitionOut(ctx, next){\n    \n    $loading.removeClass('on');\n    \n    var delay = events.trigger('transitionOut');\n    \n    if( delay ){\n        \n        setTimeout( next, delay );\n        \n    } else {\n        \n        next();\n        \n    }\n    \n}\n\nfunction go(ctx, next){\n    \n    events.trigger('remove');\n    \n    events.off();\n    \n    $htmlBody.scrollLeft(0).scrollTop(0);\n    \n    var routeName = ctx.path === '/' ? 'home' : ctx.path.split('/')[1];\n    \n    $body.removeClass (function (index, className) {\n        return (className.match (/(^|\\s)page-\\S+/g) || []).join(' ');\n    }).addClass( 'page-' + routeName );\n    \n    $window.trigger('routechange');\n    \n    next();\n    \n}\n},{\"../../firstLoad.js\":2,\"../config.js\":20,\"../events.js\":21}],24:[function(require,module,exports){\nvar navigation = require('../../navigation.js');\n\nvar Showcase = require('../../renderer/showcase.js');\nvar events = require('../events.js');\n\nvar fov = 60;\n\nmodule.exports = function(ctx, next){\n    \n    var showcase = new Showcase({\n        logo: ctx.template.filter('.home-logo'),\n        imgs: ctx.template.filter('.home-img'),\n        fov: fov\n    });\n    \n    showcase.logo.$element.addClass('fade-out');\n    showcase.imgs.forEach(function(){\n        this.$element.addClass('fade-out');\n    })\n    \n    showcase.init();\n    \n    setTimeout(function(){\n        showcase.logo.$element.removeClass('fade-out');\n        showcase.imgs.forEach(function(){\n            this.$element.removeClass('fade-out');\n        })\n    });\n    \n    showcase.logo.$element.addClass('fade-out');\n    showcase.imgs.forEach(function(){\n        this.$element.addClass('fade-out');\n    })\n    \n    navigation.hide();\n    \n    events.on({\n        \n        resize: showcase.layout.bind(showcase),\n        \n        mousemove: function(e){\n            \n            showcase.setMouse(e.clientX, e.clientY);\n            \n        },\n        \n        transitionOut: function(){\n            \n            showcase.imgs.forEach(function(){\n                this.$element.addClass('fade-out');\n            })\n            \n            showcase.logo.$element.addClass('fade-out');\n            \n            return 1000;\n            \n        },\n        \n        remove: showcase.remove.bind(showcase)\n        \n    })\n    \n    next();\n    \n}\n},{\"../../navigation.js\":6,\"../../renderer/showcase.js\":14,\"../events.js\":21}],25:[function(require,module,exports){\nvar navigation = require('../../navigation.js');\n\nvar Corner = require('../../renderer/corner.js');\nvar events = require('../events.js');\n\nvar fov = 60;\n\nmodule.exports = function(ctx, next){\n    \n    var corner = new Corner({\n        content: ctx.template,\n        fov: fov\n    })\n    \n    corner.wall1.$content.addClass('fade-out');\n    corner.wall2.$content.addClass('fade-out');\n    \n    corner.init();\n    \n    setTimeout(function(){\n        corner.wall1.$content.removeClass('fade-out');\n        corner.wall2.$content.removeClass('fade-out');\n    });\n    \n    navigation.show();\n    \n    events.on({\n        \n        resize: corner.layout.bind(corner),\n        \n        mousemove: function(e){\n            corner.setMouse(e.clientX);\n        },\n        \n        transitionOut: function(){\n            \n            corner.wall1.$content.addClass('fade-out');\n            corner.wall2.$content.addClass('fade-out');\n            \n            return 200;\n            \n        },\n        \n        remove: corner.remove.bind(corner)\n        \n    });\n    \n    next();\n    \n}\n},{\"../../navigation.js\":6,\"../../renderer/corner.js\":8,\"../events.js\":21}],26:[function(require,module,exports){\nvar config = require('../config.js');\nvar navigation = require('../../navigation.js');\n\nvar Room = require('../../renderer/room.js');\nvar Clones = require('../../renderer/clones.js');\nvar events = require('../events.js');\n\nvar metrics = require('../../metrics.js');\n\nvar $body = $('body');\n\nvar fov = 60;\n\nmodule.exports = function(ctx, next){\n    \n    var $main = ctx.template.filter('.main');\n    \n    $main.addClass('fade-out');\n    \n    var room = new Room({\n        content: $main,\n        horizontal: false,\n        fov: fov\n    });\n    \n    room.init( config.$element );\n    \n    $main.loadImages();\n    room.wall1.$content.loadImages();\n    room.wall2.$content.loadImages();\n    \n    var $titles = ctx.template.filter('ul');\n    $titles.addClass('nav_hidden');\n    $body.append( $titles );\n    \n    navigation.show();\n    \n    $main.find('.video-container').loadVideo();\n    \n    setTimeout(function(){\n        $main.removeClass('fade-out');\n        room.wall1.$content.removeClass('fade-out');\n        room.wall2.$content.removeClass('fade-out');\n        $titles.removeClass('nav_hidden')\n    });\n    \n    var $autoHeights = new Clones( $main, room.wall1.$content, room.wall2.$content ).find('.auto-height');\n    \n    $autoHeights.forEach(function(){\n        this.height( window.innerHeight - metrics.menuMargin() * 2 );\n    })\n    \n    var lastScroll = 0;\n    \n    events.on({\n        \n        resize: _.debounce(function(){\n            \n            $autoHeights.forEach(function(){\n                this.height( window.innerHeight - metrics.menuMargin() * 2 );\n            })\n            \n            room.layout();\n            room.scroll();\n            \n        }, 100),\n        \n        scroll: function(){\n            \n            var y = pageYOffset;\n            \n            if(y <= 0 || y < lastScroll){\n                navigation.show();\n            } else {\n                navigation.hide();\n            }\n            \n            room.scroll( y );\n            \n            lastScroll = y;\n        },\n        \n        transitionOut: function(){\n            \n            $main.addClass('fade-out');\n            room.wall1.$content.addClass('fade-out');\n            room.wall2.$content.addClass('fade-out');\n            $titles.addClass('nav_hidden');\n            \n            return 200;\n            \n        },\n\n        remove: room.remove.bind(room)\n        \n    })\n    \n    next();\n    \n}\n},{\"../../metrics.js\":5,\"../../navigation.js\":6,\"../../renderer/clones.js\":7,\"../../renderer/room.js\":12,\"../config.js\":20,\"../events.js\":21}],27:[function(require,module,exports){\nvar config = require('../config.js');\nvar navigation = require('../../navigation.js');\n\nvar Room = require('../../renderer/room.js');\nvar Clones = require('../../renderer/clones.js');\nvar events = require('../events.js');\n\nvar fov = 60;\n\nmodule.exports = function(ctx, next){\n    \n    ctx.template.find('.thumbnail-column').addClass('fade-out');\n    \n    var horizontal = ctx.template.hasClass('horizontal');\n    \n    var room = new Room({\n        content: ctx.template,\n        horizontal: horizontal,\n        fov: fov\n    });\n    \n    room.init( config.$element );\n    \n    navigation.show();\n    \n    var columns = new Clones( ctx.template, room.wall1.$content, room.wall2.$content ).find('.thumbnail-column');\n    \n    columns.forEach(function(i){\n        \n        var element = this;\n        \n        setTimeout(function(){\n            element.removeClass('fade-out');\n        }, i * 200)\n        \n    });\n    \n    events.on({\n        \n        resize: _.debounce(function(){\n            room.layout();\n            room.scroll();\n        }, 100),\n        \n        scroll: function(){\n            room.scroll( horizontal ? pageXOffset : pageYOffset );\n        },\n        \n        transitionOut: function(){\n            \n            columns.forEach(function(i){\n                \n                var element = this;\n                \n                setTimeout(function(){\n                    element.addClass('fade-out');\n                }, i * 200)\n                \n            })\n            \n            return columns.length * 200 + 200;\n            \n        },\n\n        remove: room.remove.bind(room)\n        \n    })\n    \n    next();\n    \n}\n},{\"../../navigation.js\":6,\"../../renderer/clones.js\":7,\"../../renderer/room.js\":12,\"../config.js\":20,\"../events.js\":21}],28:[function(require,module,exports){\nrequire('./renderer/zepto.plugins.js');\n\nvar metrics = require('./metrics.js');\nvar nav = require('./navigation.js');\n\nvar $document = $(document);\nvar $body = $('body');\n\nmodule.exports = function(){\n    \n    $(function(){\n        \n        $('.video-container').loadVideo();\n        \n        var $rspImgs = $('.rsp-img');\n        var $autoHeights = $('.auto-height');\n        \n        function onResize(){\n            $rspImgs.loadImages();\n            $autoHeights.height( window.innerHeight - metrics.baseMargin - metrics.menuMargin() );\n        }\n        \n        $(window).on('resize', onResize);\n        onResize();\n        \n        if( $body.hasClass('page-home') ) {\n            \n            var Showcase = require('./renderer/showcase.js');\n            \n            var showcase = new Showcase({\n                logo: $('.home-logo').detach(),\n                imgs: $('.home-img').detach(),\n                fov: 60\n            })\n            \n            showcase.init();\n            \n        } else if( $body.hasClass('page-project') ) {\n            \n            var lastScroll = 0;\n            \n            function onScroll(){\n                \n                var st = $body.scrollTop();\n                \n                if( st <= 0 || st < lastScroll ){\n                    nav.show();\n                } else {\n                    nav.hide();\n                }\n                \n                lastScroll = st;\n                \n            }\n            \n            $document.on('scroll', onScroll);\n            onScroll();\n            \n        }\n        \n    })    \n    \n}\n\n\n},{\"./metrics.js\":5,\"./navigation.js\":6,\"./renderer/showcase.js\":14,\"./renderer/zepto.plugins.js\":19}]},{},[4])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9icmVha3BvaW50LmpzIiwianMvZmlyc3RMb2FkLmpzIiwianMvaXNJRS5qcyIsImpzL21haW4uanMiLCJqcy9tZXRyaWNzLmpzIiwianMvbmF2aWdhdGlvbi5qcyIsImpzL3JlbmRlcmVyL2Nsb25lcy5qcyIsImpzL3JlbmRlcmVyL2Nvcm5lci5qcyIsImpzL3JlbmRlcmVyL21haW4uanMiLCJqcy9yZW5kZXJlci9yQUYuanMiLCJqcy9yZW5kZXJlci9yZXNpemFibGVDU1MzRE9iamVjdC5qcyIsImpzL3JlbmRlcmVyL3Jvb20uanMiLCJqcy9yZW5kZXJlci9zY3JvbGwuanMiLCJqcy9yZW5kZXJlci9zaG93Y2FzZS5qcyIsImpzL3JlbmRlcmVyL3N1cGVyRmFjZS5qcyIsImpzL3JlbmRlcmVyL3N1cGVyU2luZ2xldG9uLmpzIiwianMvcmVuZGVyZXIvdGhyZWUuY3NzcmVuZGVyZXIuanMiLCJqcy9yZW5kZXJlci91dGlscy5qcyIsImpzL3JlbmRlcmVyL3plcHRvLnBsdWdpbnMuanMiLCJqcy9yb3V0ZXIvY29uZmlnLmpzIiwianMvcm91dGVyL2V2ZW50cy5qcyIsImpzL3JvdXRlci9tYWluLmpzIiwianMvcm91dGVyL3JvdXRlcy9jb21tb24uanMiLCJqcy9yb3V0ZXIvcm91dGVzL2hvbWUuanMiLCJqcy9yb3V0ZXIvcm91dGVzL2luZm8uanMiLCJqcy9yb3V0ZXIvcm91dGVzL3Byb2plY3QuanMiLCJqcy9yb3V0ZXIvcm91dGVzL3dvcmsuanMiLCJqcy9zdGF0aWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIHdpZHRocyA9IFtdO1xuXG5mdW5jdGlvbiBpbml0KCl7XG4gICAgXG4gICAgZm9yKHZhciBpID0gMDsgaSA8PSBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHdpZHRocy5wdXNoKCBhcmd1bWVudHNbaV0gKTtcbiAgICBcbn1cblxuZnVuY3Rpb24gcSgpIHtcbiAgICBcbiAgICB2YXIgdmFsdWVzID0gYXJndW1lbnRzO1xuXHR2YXIgcmV0O1xuXHRcblx0Zm9yKHZhciBpID0gMDsgaSA8IHdpZHRocy5sZW5ndGg7IGkrKyl7XG5cdCAgICBcblx0ICAgIGlmKCB3aW5kb3cuaW5uZXJXaWR0aCA8PSB3aWR0aHNbaV0gKSByZXR1cm4gdmFsdWVzW2ldO1xuXHQgICAgXG5cdH1cblx0XG5cdHJldHVybiB2YWx1ZXNbIHZhbHVlcy5sZW5ndGggLSAxIF07XG5cdFxufVxuXG5mdW5jdGlvbiBiaW5kKCl7XG4gICAgXG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcS5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBcbiAgICBpbml0OiBpbml0LFxuICAgIHE6IHEsXG4gICAgYmluZDogYmluZFxuICAgIFxufSIsInZhciBmaXJzdExvYWQgPSB7XG4gICAgaXM6IHRydWUsXG4gICAgZG9uZTogZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdmaXJzdC1sb2FkJyk7XG4gICAgICAgIGZpcnN0TG9hZC5pcyA9IGZhbHNlO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaXJzdExvYWQ7IiwidmFyICRidW9vcCA9IHt2czp7aToxMSxmOjI1LG86MTIuMSxzOjd9LGM6Mn07IFxuZnVuY3Rpb24gJGJ1b19mKCl7IFxuIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTsgXG4gZS5zcmMgPSBcIi8vYnJvd3Nlci11cGRhdGUub3JnL3VwZGF0ZS5taW4uanNcIjsgXG4gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKTtcbn07XG50cnkge2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICRidW9fZixmYWxzZSl9XG5jYXRjaChlKXt3aW5kb3cuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIiwgJGJ1b19mKX1cbiIsInJlcXVpcmUoJy4vYnJlYWtwb2ludC5qcycpLmluaXQoIDQxNCwgNzY4ICk7XG5yZXF1aXJlKCcuL25hdmlnYXRpb24uanMnKS5pbml0KCk7XG5yZXF1aXJlKCcuL2lzSUUuanMnKTtcblxudmFyIGZpcnN0TG9hZCA9IHJlcXVpcmUoJy4vZmlyc3RMb2FkLmpzJyk7XG52YXIgbWV0cmljcyA9IHJlcXVpcmUoJy4vbWV0cmljcy5qcycpO1xuXG5pZiggJCgnYm9keScpLmhhc0NsYXNzKCd0aHJlZS1kJykgKXtcbiAgICByZXF1aXJlKCcuL3JvdXRlci9tYWluLmpzJykoKTtcbn0gZWxzZSB7XG4gICAgcmVxdWlyZSgnLi9zdGF0aWMuanMnKSgpO1xufVxuXG5maXJzdExvYWQuZG9uZSgpOyIsInZhciBicmVha3BvaW50ID0gcmVxdWlyZSgnLi9icmVha3BvaW50LmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFxuICAgIGJhc2VNYXJnaW46IDIwLFxuICAgIFxuICAgIG1lbnVNYXJnaW46IGJyZWFrcG9pbnQuYmluZCgxNCAqIDMsIDE2ICogMywgMTggKiAzKVxuICAgIFxufSIsInZhciAkbmF2ID0gJCgnLm5hdl9mdWxsLCAubmF2X3NtYWxsJyk7XG52YXIgJGZ1bGwgPSAkbmF2LmZpbHRlcignLm5hdl9mdWxsJyk7XG52YXIgJHNtYWxsID0gJG5hdi5maWx0ZXIoJy5uYXZfc21hbGwnKTtcbnZhciAkZHJvcGRvd25zID0gJGZ1bGwuZmluZCgnLmRyb3Bkb3duJyk7XG5cbnZhciBpc0hpZGRlbiA9IGZhbHNlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBcbiAgICBpbml0OiBmdW5jdGlvbigpe1xuICAgICAgICBcbiAgICAgICAgJChmdW5jdGlvbigpe1xuICAgICAgICBcbiAgICAgICAgICAgICRzbWFsbC5jaGlsZHJlbigpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNtYWxsLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAkZHJvcGRvd25zLmVhY2goIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgJG1lbnUgPSAkdGhpcy5maW5kKCcuZHJvcGRvd25fX21lbnUnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkdGhpcy5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICRtZW51LmFkZENsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgfSkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkbWVudS5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAkKCcuc29jaWFsLXRvZ2dsZScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vICAgICAkc29jaWFsTWVudS5hZGRDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgLy8gfSkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gICAgICRzb2NpYWxNZW51LnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAvLyB9KVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH0sXG4gICAgXG4gICAgc2hvdzogZnVuY3Rpb24oKXtcbiAgICAgICAgaWYoIWlzSGlkZGVuKSByZXR1cm47XG4gICAgICAgICRuYXYucmVtb3ZlQ2xhc3MoJ25hdl9oaWRkZW4nKTtcbiAgICAgICAgaXNIaWRkZW4gPSBmYWxzZTtcbiAgICB9LFxuICAgIFxuICAgIGhpZGU6IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKGlzSGlkZGVuKSByZXR1cm47XG4gICAgICAgICRuYXYuYWRkQ2xhc3MoJ25hdl9oaWRkZW4nKTtcbiAgICAgICAgaXNIaWRkZW4gPSB0cnVlO1xuICAgIH0sXG4gICAgXG4gICAgZWxlbWVudHM6IHtcbiAgICAgICAgJGZ1bGw6ICRmdWxsLFxuICAgICAgICAkc21hbGw6ICRzbWFsbCxcbiAgICAgICAgJGJvdGg6ICRuYXZcbiAgICB9XG4gICAgXG59IiwiZnVuY3Rpb24gQ2xvbmVzKCl7XG4gICAgXG4gICAgdGhpcy5jbG9uZXMgPSBbXTtcbiAgICBcbiAgICBmb3IoIHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKyApXG4gICAgICAgIHRoaXMuY2xvbmVzLnB1c2goIGFyZ3VtZW50c1tpXSApO1xuICAgIFxufVxuXG5DbG9uZXMucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbihjbG9uZXMpe1xuICAgIFxuICAgIHZhciBjbG9uZXMgPSBjbG9uZXMgfHwgdGhpcy5jbG9uZXM7XG4gICAgdmFyIGNvbGxlY3Rpb25zID0gW107XG4gICAgXG4gICAgZm9yKCB2YXIgaSA9IDA7IGkgPCBjbG9uZXMubGVuZ3RoOyBpKysgKXtcbiAgICAgICAgXG4gICAgICAgIHZhciAkZWxlbWVudHMgPSBjbG9uZXNbaV07XG4gICAgICAgIFxuICAgICAgICAkZWxlbWVudHMuZWFjaChmdW5jdGlvbihqKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoICFjb2xsZWN0aW9uc1tqXSApIGNvbGxlY3Rpb25zW2pdID0gW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbGxlY3Rpb25zW2pdLnB1c2goICQodGhpcykgKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jb2xsZWN0aW9ucyA9IGNvbGxlY3Rpb25zO1xuICAgIHRoaXMubGVuZ3RoID0gY29sbGVjdGlvbnMubGVuZ3RoO1xuICAgIFxuICAgIHJldHVybiB0aGlzO1xuXG59O1xuXG5bJ2ZpbmQnLCAnZmlsdGVyJ10uZm9yRWFjaCggZnVuY3Rpb24oIGZuTmFtZSApIHtcbiAgICBcbiAgICBDbG9uZXMucHJvdG90eXBlW2ZuTmFtZV0gPSBmdW5jdGlvbiggc2VsZWN0b3IgKXtcbiAgICAgICAgXG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuY2xvbmVzLm1hcChmdW5jdGlvbihjbG9uZSl7XG4gICAgICAgICAgICByZXR1cm4gY2xvbmVbZm5OYW1lXShzZWxlY3Rvcik7XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5zb3J0KCBlbGVtZW50cyApO1xuICAgICAgICBcbiAgICB9XG4gICAgXG59KTtcblxuWydmb3JFYWNoJywgJ21hcCddLmZvckVhY2goZnVuY3Rpb24oZm5OYW1lKXtcbiAgICBcbiAgICBDbG9uZXMucHJvdG90eXBlW2ZuTmFtZV0gPSBmdW5jdGlvbihmbil7XG4gICAgICAgICAgICBcbiAgICAgICAgdmFyIGNvbGxlY3Rpb25zID0gdGhpcy5jb2xsZWN0aW9uc1tmbk5hbWVdKGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGkpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbltmbk5hbWVdKGZ1bmN0aW9uKCAkZWxlbWVudCwgaiApe1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKCAkZWxlbWVudCwgaSwgaiApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgaWYoZm5OYW1lID09PSAnbWFwJykgdGhpcy5jb2xsZWN0aW9ucyA9IGNvbGxlY3Rpb25zO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn0pXG5cblxubW9kdWxlLmV4cG9ydHMgPSBDbG9uZXM7IiwidmFyIHJlbmRlcmVyID0gcmVxdWlyZSgnLi9tYWluLmpzJyk7XG52YXIgU3VwZXJGYWNlID0gcmVxdWlyZSgnLi9zdXBlckZhY2UuanMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbnZhciBzY3JvbGwgPSByZXF1aXJlKCcuL3Njcm9sbC5qcycpO1xuXG5mdW5jdGlvbiBDb3JuZXIob3B0aW9ucyl7XG4gICAgXG4gICAgdGhpcy53YWxsMSA9IG5ldyBTdXBlckZhY2Uoe1xuICAgICAgICBob3Jpem9udGFsOiB0cnVlLFxuICAgICAgICBjb250ZW50OiBvcHRpb25zLmNvbnRlbnRcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLndhbGwyID0gbmV3IFN1cGVyRmFjZSh7XG4gICAgICAgIGhvcml6b250YWw6IHRydWUsXG4gICAgICAgIGNvbnRlbnQ6IG9wdGlvbnMuY29udGVudFxuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuJGlubmVyMSA9IHRoaXMud2FsbDEuJGNvbnRlbnQuZmluZCgnLmluZm8taW5uZXInKTtcbiAgICB0aGlzLiRpbm5lcjIgPSB0aGlzLndhbGwyLiRjb250ZW50LmZpbmQoJy5pbmZvLWlubmVyJyk7XG4gICAgXG4gICAgdGhpcy5mb3YgPSBvcHRpb25zLmZvdjtcbiAgICB0aGlzLm1vdXNlWCA9IDAuNTtcbiAgICBcbn1cblxuQ29ybmVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgICBcbiAgICBzY3JvbGwubm9uZSgpO1xuICAgIFxuICAgIHJlbmRlcmVyLnNjZW5lLmFkZCggdGhpcy53YWxsMSwgdGhpcy53YWxsMiApO1xuICAgIFxuICAgIHRoaXMubGF5b3V0KCk7XG4gICAgXG59XG5cbkNvcm5lci5wcm90b3R5cGUubGF5b3V0ID0gZnVuY3Rpb24oIGlzTW91c2UgKXtcbiAgICBcbiAgICB2YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHZhciBoID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIFxuICAgIHZhciBoYWxmV2lkdGggPSB3LzI7XG4gICAgXG4gICAgdmFyIG5lYXIgPSAtdXRpbHMucGVyZmVjdFooIHRoaXMuZm92ICk7XG4gICAgXG4gICAgdmFyIGRlcHRoID0gdyAqIC4yNTtcbiAgICB2YXIgZmFyID0gbmVhciArIGRlcHRoO1xuICAgIHZhciBjeiA9IC1uZWFyIC0gZGVwdGgvMjtcbiAgICBcbiAgICB2YXIgbGVmV2FsbFJhdGlvID0gdGhpcy5tb3VzZVg7XG4gICAgdmFyIHJpZ2h0V2FsbFJhdGlvID0gMSAtIGxlZldhbGxSYXRpbztcbiAgICBcbiAgICB2YXIgbGVmdFdhbGxTY3JlZW5XaWR0aCA9IGxlZldhbGxSYXRpbyAqIHc7XG4gICAgdmFyIHJpZ2h0V2FsbFNjcmVlbldpZHRoID0gcmlnaHRXYWxsUmF0aW8gICogdztcbiAgICBcbiAgICB2YXIgZGVwdGhTcXVhcmVkID0gTWF0aC5wb3coZGVwdGgsIDIpO1xuICAgIFxuICAgIHZhciBsZWZ0V2FsbFdpZHRoID0gTWF0aC5zcXJ0KCBkZXB0aFNxdWFyZWQgKyBNYXRoLnBvdyhsZWZ0V2FsbFNjcmVlbldpZHRoLCAyKSApO1xuICAgIHZhciByaWdodFdhbGxXaWR0aCA9IE1hdGguc3FydCggZGVwdGhTcXVhcmVkICsgTWF0aC5wb3cocmlnaHRXYWxsU2NyZWVuV2lkdGgsIDIpICk7XG4gICAgXG4gICAgdGhpcy53YWxsMS5zZXRTaXplKCBsZWZ0V2FsbFdpZHRoLCBoICk7XG4gICAgdGhpcy53YWxsMS5wb3NpdGlvbi54ID0gLWhhbGZXaWR0aCArIGxlZnRXYWxsU2NyZWVuV2lkdGggLyAyO1xuICAgIHRoaXMud2FsbDEucG9zaXRpb24ueiA9IGN6O1xuICAgIHRoaXMud2FsbDEucm90YXRpb24ueSA9IE1hdGguYXRhbjIoLWRlcHRoLCBsZWZ0V2FsbFNjcmVlbldpZHRoKTtcbiAgICBcbiAgICB0aGlzLndhbGwyLnNldFNpemUoIHJpZ2h0V2FsbFdpZHRoLCBoICk7XG4gICAgdGhpcy53YWxsMi5wb3NpdGlvbi54ID0gaGFsZldpZHRoIC0gcmlnaHRXYWxsU2NyZWVuV2lkdGggLyAyO1xuICAgIHRoaXMud2FsbDIucG9zaXRpb24ueiA9IGN6O1xuICAgIHRoaXMud2FsbDIucm90YXRpb24ueSA9IE1hdGguYXRhbjIoZGVwdGgsIHJpZ2h0V2FsbFNjcmVlbldpZHRoKTtcbiAgICBcbiAgICBpZighaXNNb3VzZSkge1xuICAgICAgICB0aGlzLndhbGwxLnNldEhlaWdodCggaCApO1xuICAgICAgICB0aGlzLndhbGwyLnNldEhlaWdodCggaCApO1xuICAgIH1cbiAgICBcbiAgICB2YXIgdG90YWxXYWxsV2lkdGggPSBsZWZ0V2FsbFdpZHRoICsgcmlnaHRXYWxsV2lkdGg7XG4gICAgXG4gICAgdGhpcy53YWxsMS4kY29udGVudC53aWR0aCggdG90YWxXYWxsV2lkdGggKTtcbiAgICB0aGlzLndhbGwyLiRjb250ZW50LndpZHRoKCB0b3RhbFdhbGxXaWR0aCApO1xuICAgIFxuICAgIHZhciBmbGF0QW5nbGUgPSBNYXRoLmF0YW4yKGZhciwgdy8yKTtcbiAgICB2YXIgbWFyZ2luID0gZGVwdGggLyBNYXRoLnNpbihmbGF0QW5nbGUpO1xuICAgIHZhciBtYXhXYWxsV2lkdGggPSBNYXRoLnNxcnQoIE1hdGgucG93KHcvMiwgMikgKyBkZXB0aFNxdWFyZWQgKSAqIDI7XG4gICAgdmFyIGlubmVyV2lkdGggPSBtYXhXYWxsV2lkdGggLSBtYXJnaW4gKiAyO1xuICAgIFxuICAgIHRoaXMuJGlubmVyMS53aWR0aCggaW5uZXJXaWR0aCApO1xuICAgIHRoaXMuJGlubmVyMi53aWR0aCggaW5uZXJXaWR0aCApO1xuICAgIFxuICAgIHRoaXMud2FsbDEuc2Nyb2xsKCAwICk7XG4gICAgdGhpcy53YWxsMi5zY3JvbGwoIGxlZnRXYWxsV2lkdGggKTtcbiAgICBcbiAgICByZW5kZXJlci5yZW5kZXIoKTtcbiAgICBcbn1cblxuQ29ybmVyLnByb3RvdHlwZS5zZXRNb3VzZSA9IGZ1bmN0aW9uKHgpe1xuICAgIFxuICAgIHRoaXMubW91c2VYID0geCAvIHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIFxuICAgIHRoaXMubGF5b3V0KCB0cnVlICk7XG4gICAgXG59XG5cbkNvcm5lci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKXtcbiAgICBcbiAgICByZW5kZXJlci5zY2VuZS5yZW1vdmUoIHRoaXMud2FsbDEsIHRoaXMud2FsbDIgKTtcbiAgICBcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb3JuZXI7IiwicmVxdWlyZSgnLi90aHJlZS5jc3NyZW5kZXJlci5qcycpO1xucmVxdWlyZSgnLi96ZXB0by5wbHVnaW5zLmpzJyk7XG5cbnZhciByZW5kZXJlciA9IG5ldyBUSFJFRS5DU1MzRFJlbmRlcmVyKCk7XG5yZW5kZXJlci5kb21FbGVtZW50LmlkID0gJ3JlbmRlcmVyJztcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHJlbmRlcmVyLmRvbUVsZW1lbnQgKTtcblxudmFyIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG5cbnZhciBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNjAsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAxLCAxMDAwMDApO1xuXG5zY2VuZS5hZGQoY2FtZXJhKTtcblxuZnVuY3Rpb24gc2V0Rk9WKGZvdil7XG4gICAgXG4gICAgY2FtZXJhLmZvdiA9IGZvdjtcbiAgICBcbiAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIFxufVxuXG5mdW5jdGlvbiByZW5kZXIoKXtcbiAgICBcbiAgICByZW5kZXJlci5yZW5kZXIoIHNjZW5lLCBjYW1lcmEgKTtcbiAgICBcbn1cblxuZnVuY3Rpb24gcmVzaXplKCl7XG4gICAgXG4gICAgdmFyIHcgPSBNYXRoLm1pbiggd2luZG93LmlubmVyV2lkdGgsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCApO1xuICAgIHZhciBoID0gTWF0aC5taW4oIHdpbmRvdy5pbm5lckhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCApO1xuICAgIFxuICAgIHJlbmRlcmVyLnNldFNpemUoIHcsIGggKTtcbiAgICBjYW1lcmEuYXNwZWN0ID0gdyAvIGg7XG4gICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICBcbn1cblxuJCh3aW5kb3cpLm9uKCdyZXNpemUnLCByZXNpemUpO1xucmVzaXplKCk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFxuICAgIHNjZW5lOiBzY2VuZSxcbiAgICBcbiAgICBzZXRGT1Y6IHNldEZPVixcbiAgICBcbiAgICByZW5kZXI6IHJlbmRlcixcbiAgICBcbiAgICByZXNpemU6IHJlc2l6ZSxcbiAgICBcbiAgICBnZXRTaXplOiByZW5kZXJlci5nZXRTaXplXG4gICAgXG59IiwiLy8gaHR0cDovL3BhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy9cbi8vIGh0dHA6Ly9teS5vcGVyYS5jb20vZW1vbGxlci9ibG9nLzIwMTEvMTIvMjAvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1lci1hbmltYXRpbmdcblxuLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlci4gZml4ZXMgZnJvbSBQYXVsIElyaXNoIGFuZCBUaW5vIFppamRlbFxuXG4vLyBNSVQgbGljZW5zZVxuXG4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxhc3RUaW1lID0gMDtcbiAgICB2YXIgdmVuZG9ycyA9IFsnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJ107XG4gICAgZm9yKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvd1t2ZW5kb3JzW3hdKydSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ10gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IHdpbmRvd1t2ZW5kb3JzW3hdKydDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcbiAgICB9XG4gXG4gICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XG4gICAgICAgICAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTsgfSwgXG4gICAgICAgICAgICAgIHRpbWVUb0NhbGwpO1xuICAgICAgICAgICAgbGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XG4gICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgIH07XG4gXG4gICAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgICAgICB9O1xufSgpKTtcblx0XG52YXIgZnVuY3MgPSB7fTtcblxudmFyIGZ1bmNDb3VudCA9IDA7XG5cbnZhciBmcmFtZSA9IGZhbHNlO1xuXG52YXIgdGhlbjtcblxuZnVuY3Rpb24gdGljaygpe1xuXHRcblx0ZnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XG5cdFxuXHR2YXIgbm93ID0gRGF0ZS5ub3coKTtcblx0dmFyIGRUID0gbm93IC0gdGhlbjtcblx0XG5cdGZvcih2YXIgbmFtZSBpbiBmdW5jcyl7XG5cdFx0aWYoIGZ1bmNzW25hbWVdKG5vdywgZFQpID09PSBmYWxzZSApe1xuXHRcdFx0c3RvcChuYW1lKTtcblx0XHR9O1xuXHR9XG5cdFxuXHR0aGVuID0gbm93O1xuXHRcbn1cblxuZnVuY3Rpb24gc3RhcnQobmFtZSwgZm4pe1xuXHRcblx0aWYoIWZuKXtcblx0XHRmbiA9IG5hbWU7XG5cdFx0bmFtZSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0aWYoZnVuY3NbbmFtZV0pIHJldHVybiBmYWxzZTtcblx0XG5cdGZ1bmNzW25hbWVdID0gZm47XG5cdFxuXHRmdW5jQ291bnQrKztcblx0XG5cdGlmKCFmcmFtZSl7XG5cdFx0dGhlbiA9IERhdGUubm93KCk7XG5cdFx0ZnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XG5cdH1cblx0XG59XG5cbmZ1bmN0aW9uIHN0b3AobmFtZSl7XG5cdFxuXHRpZihuYW1lKXtcblx0XHRkZWxldGUgZnVuY3NbbmFtZV07XG5cdFx0ZnVuY0NvdW50LS07XG5cdH0gZWxzZSB7XG5cdFx0ZnVuY3MgPSB7fTtcblx0XHRmdW5jQ291bnQgPSAwO1xuXHR9XG5cdFxuXHRpZiggZnVuY0NvdW50ID09PSAwICl7XG5cdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUpO1xuXHRcdGZyYW1lID0gZmFsc2U7XG5cdH1cblxuXHRcbn1cblxubW9kdWxlLmV4cG9ydHMgPSAge1xuXHRzdGFydDogc3RhcnQsXG5cdHN0b3A6IHN0b3Bcbn0iLCJmdW5jdGlvbiBSZXNpemFibGVDU1MzRE9iamVjdCgkZWxlbWVudCl7XG4gICAgXG4gICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xuICAgIFxuICAgIFRIUkVFLkNTUzNET2JqZWN0LmNhbGwodGhpcywgdGhpcy4kZWxlbWVudFswXSk7XG4gICAgXG59XG5cblJlc2l6YWJsZUNTUzNET2JqZWN0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRIUkVFLkNTUzNET2JqZWN0LnByb3RvdHlwZSApO1xuUmVzaXphYmxlQ1NTM0RPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVEhSRUUuQ1NTM0RPYmplY3Q7XG5cblJlc2l6YWJsZUNTUzNET2JqZWN0LnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3LCBoKXtcbiAgICB0aGlzLncgPSB3O1xuICAgIHRoaXMuaCA9IGg7XG4gICAgdGhpcy5oYWxmSGVpZ2h0ID0gdGhpcy5oLzI7XG4gICAgdGhpcy4kZWxlbWVudC5jc3Moe1xuICAgICAgICB3aWR0aDogdyxcbiAgICAgICAgaGVpZ2h0OiBoXG4gICAgfSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZXNpemFibGVDU1MzRE9iamVjdDsiLCJ2YXIgcmVuZGVyZXIgPSByZXF1aXJlKCcuL21haW4uanMnKTtcbnZhciBTdXBlckZhY2UgPSByZXF1aXJlKCcuL3N1cGVyRmFjZS5qcycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xudmFyIHNjcm9sbCA9IHJlcXVpcmUoJy4vc2Nyb2xsLmpzJyk7XG52YXIgbWFyZ2luID0gcmVxdWlyZSgnLi4vbWV0cmljcy5qcycpLm1lbnVNYXJnaW47XG5cbmZ1bmN0aW9uIFJvb20ob3B0aW9ucyl7XG4gICAgXG4gICAgdGhpcy5ob3Jpem9udGFsID0gb3B0aW9ucy5ob3Jpem9udGFsO1xuICAgIHRoaXMuZm92ID0gb3B0aW9ucy5mb3Y7XG4gICAgdGhpcy5jb250ZW50ID0gb3B0aW9ucy5jb250ZW50O1xuICAgIFxuICAgIHZhciBmYWNlT3B0aW9ucyA9IHtcbiAgICAgICAgaG9yaXpvbnRhbDogdGhpcy5ob3Jpem9udGFsLFxuICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnRcbiAgICB9XG4gICAgXG4gICAgdGhpcy53YWxsMSA9IG5ldyBTdXBlckZhY2UoIGZhY2VPcHRpb25zICk7XG4gICAgdGhpcy53YWxsMiA9IG5ldyBTdXBlckZhY2UoIGZhY2VPcHRpb25zICk7XG4gICAgXG4gICAgaWYodGhpcy5ob3Jpem9udGFsKXtcbiAgICAgICAgXG4gICAgICAgIHRoaXMud2FsbDEucm90YXRpb24ueSA9IE1hdGguUEkgLyAyO1xuICAgICAgICB0aGlzLndhbGwyLnJvdGF0aW9uLnkgPSAtTWF0aC5QSSAvIDI7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgdGhpcy53YWxsMS5yb3RhdGlvbi54ID0gTWF0aC5QSSAvIDI7XG4gICAgICAgIHRoaXMud2FsbDIucm90YXRpb24ueCA9IC1NYXRoLlBJIC8gMjtcblxuICAgIH1cbiAgICBcbiAgICB0aGlzLmRlcHRoID0gMDtcbiAgICB0aGlzLnNpemUgPSAwO1xuICAgIFxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBcbiAgICB0aGlzLmNvbnRlbnQuZmluZCgnaW1nJykuZWFjaChmdW5jdGlvbihpKXtcbiAgICAgICAgdGhpcy5vbmxvYWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2VsZi5zZXRTY3JvbGxTaXplKCk7XG4gICAgICAgIH07XG4gICAgfSlcbiAgICBcbn1cblxuUm9vbS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCBlbGVtZW50ICl7XG4gICAgXG4gICAgcmVuZGVyZXIuc2V0Rk9WKCB0aGlzLmZvdiApO1xuICAgIHJlbmRlcmVyLnNjZW5lLmFkZCggdGhpcy53YWxsMSwgdGhpcy53YWxsMiApO1xuICAgIGVsZW1lbnQuYXBwZW5kKCB0aGlzLmNvbnRlbnQgKTtcbiAgICBlbGVtZW50LmFwcGVuZFRvKCAnYm9keScgKTtcbiAgICB0aGlzLmxheW91dCgpO1xuICAgIHRoaXMuc2Nyb2xsKCAwICk7XG4gICAgXG59XG5cbiAgICBcblJvb20ucHJvdG90eXBlLmxheW91dCA9IGZ1bmN0aW9uKCl7XG4gICAgXG4gICAgdGhpcy5zZXRTY3JvbGxTaXplKCk7XG4gICAgICAgIFxuICAgIHZhciBtID0gbWFyZ2luKCk7XG4gICAgXG4gICAgdmFyIHNpemUgPSByZW5kZXJlci5nZXRTaXplKCk7XG4gICAgXG4gICAgdmFyIHcgPSBzaXplLndpZHRoIC0gbSAqIDI7XG4gICAgdmFyIGggPSBzaXplLmhlaWdodCAtIG0gKiAyO1xuICAgIFxuICAgIHZhciBmYXIgPSB1dGlscy5wZXJmZWN0WiggdGhpcy5mb3YgKTtcbiAgICB2YXIgZm92WCA9IHV0aWxzLmZvdlgoIHRoaXMuZm92ICk7XG4gICAgXG4gICAgdmFyIGRlcHRoID0gTWF0aC5tYXgoXG4gICAgICAgIG0gLyBNYXRoLnRhbiggVEhSRUUuTWF0aC5kZWdUb1JhZCggdGhpcy5mb3YgLyAyKSApLFxuICAgICAgICBtIC8gTWF0aC50YW4oIFRIUkVFLk1hdGguZGVnVG9SYWQoIGZvdlggLyAyKSApXG4gICAgKTtcbiAgICBcbiAgICB2YXIgY3ogPSBmYXIgKyBkZXB0aC8yO1xuICAgIFxuICAgIHRoaXMud2FsbDEucG9zaXRpb24ueiA9IGN6O1xuICAgIHRoaXMud2FsbDIucG9zaXRpb24ueiA9IGN6O1xuICAgIFxuICAgIGlmICggdGhpcy5ob3Jpem9udGFsICkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy53YWxsMS5wb3NpdGlvbi54ID0gLXcvMjtcbiAgICAgICAgdGhpcy53YWxsMS5zZXRTaXplKCBkZXB0aCwgaCApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy53YWxsMi5wb3NpdGlvbi54ID0gdy8yO1xuICAgICAgICB0aGlzLndhbGwyLnNldFNpemUoIGRlcHRoLCBoICk7XG4gICAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLndhbGwxLnBvc2l0aW9uLnkgPSBoLzI7XG4gICAgICAgIHRoaXMud2FsbDEuc2V0U2l6ZSggdywgZGVwdGggKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMud2FsbDIucG9zaXRpb24ueSA9IC1oLzI7XG4gICAgICAgIHRoaXMud2FsbDIuc2V0U2l6ZSggdywgZGVwdGggKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHRoaXMuZGVwdGggPSBkZXB0aDtcbiAgICB0aGlzLnNpemUgPSB0aGlzLmhvcml6b250YWwgPyB3IDogaDtcbiAgICBcbiAgICByZW5kZXJlci5yZW5kZXIoKTtcbiAgICAgXG59XG5cblJvb20ucHJvdG90eXBlLnNldFNjcm9sbFNpemUgPSBmdW5jdGlvbigpe1xuICAgIFxuICAgIGlmKCB0aGlzLmhvcml6b250YWwgKXtcbiAgICAgICAgXG4gICAgICAgIHNjcm9sbC5zZXRYKCB0aGlzLmNvbnRlbnQud2lkdGgoKSApO1xuICAgICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgc2Nyb2xsLnNldFkoIHRoaXMuY29udGVudC5oZWlnaHQoKSArIHRoaXMuZGVwdGggKiAyICk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZW5kZXJlci5yZXNpemUoKTtcbiAgICBcbn1cbiAgICBcblJvb20ucHJvdG90eXBlLnNjcm9sbCA9IGZ1bmN0aW9uKHMpe1xuICAgICAgICBcbiAgICBpZihzID09PSB1bmRlZmluZWQpe1xuICAgICAgICBzID0gdGhpcy53YWxsMS5zY3JvbGxUb3A7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcyAtPSB0aGlzLmRlcHRoO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLndhbGwxLnNjcm9sbCggcyApO1xuICAgIFxuICAgIGlmKHRoaXMuaG9yaXpvbnRhbCl7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbnRlbnQudHJhbnNsYXRlKCAtcyAtIHRoaXMuZGVwdGgsIDAgKTtcbiAgICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGVudC50cmFuc2xhdGUoIDAsIC1zIC0gdGhpcy5kZXB0aCApO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLndhbGwyLnNjcm9sbCggcyArIHRoaXMuZGVwdGggKyB0aGlzLnNpemUgKTtcbiAgICBcbn1cblxuUm9vbS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKXtcbiAgICBcbiAgICByZW5kZXJlci5zY2VuZS5yZW1vdmUoIHRoaXMud2FsbDEsIHRoaXMud2FsbDIgKTtcbiAgICBcbiAgICB0aGlzLmNvbnRlbnQucGFyZW50KCkuZGV0YWNoKCk7XG4gICAgdGhpcy5jb250ZW50LmRldGFjaCgpO1xuICAgIFxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJvb207IiwidmFyIHNpemVyID0gJCgnPGRpdiBjbGFzcz1cInNpemVyXCI+JylcbnZhciBib2R5ID0gJCgnYm9keScpO1xuXG5ib2R5LmFwcGVuZCggc2l6ZXIgKTtcblxudmFyIGhvcml6b250YWwgPSBmYWxzZTtcblxuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgZnVuY3Rpb24oZSl7XG4gICAgXG4gICAgaWYgKCBob3Jpem9udGFsICkge1xuICAgICAgICBcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KCBlLmRlbHRhWSArIGUuZGVsdGFYLCAwICk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn0pXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIHNldFg6IGZ1bmN0aW9uKHgpe1xuICAgICAgICBob3Jpem9udGFsID0gdHJ1ZTtcbiAgICAgICAgc2l6ZXIuY3NzKHtcbiAgICAgICAgICAgIHdpZHRoOiB4LFxuICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJSdcbiAgICAgICAgfSlcbiAgICAgICAgYm9keS5jc3Moe1xuICAgICAgICAgICAgb3ZlcmZsb3dYOiAnc2Nyb2xsJyxcbiAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIHNldFk6IGZ1bmN0aW9uKHkpe1xuICAgICAgICBob3Jpem9udGFsID0gZmFsc2U7XG4gICAgICAgIHNpemVyLmNzcyh7XG4gICAgICAgICAgICBoZWlnaHQ6IHksXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnXG4gICAgICAgIH0pXG4gICAgICAgIGJvZHkuY3NzKHtcbiAgICAgICAgICAgIG92ZXJmbG93WTogJ3Njcm9sbCcsXG4gICAgICAgICAgICBvdmVyZmxvd1g6ICdoaWRkZW4nXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH0sXG4gICAgbm9uZTogZnVuY3Rpb24oKXtcbiAgICAgICAgaG9yaXpvbnRhbCA9IGZhbHNlO1xuICAgICAgICBzaXplci5jc3Moe1xuICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnXG4gICAgICAgIH0pXG4gICAgICAgIGJvZHkuY3NzKHtcbiAgICAgICAgICAgIG92ZXJmbG93WDogJ2hpZGRlbicsXG4gICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgIH0pXG4gICAgfVxufSIsInZhciByZW5kZXJlciA9IHJlcXVpcmUoJy4vbWFpbi5qcycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xudmFyIHNjcm9sbCA9IHJlcXVpcmUoJy4vc2Nyb2xsLmpzJyk7XG52YXIgckFGID0gcmVxdWlyZSgnLi9yQUYuanMnKTtcblxudmFyIFN1cGVyU2luZ2xldG9uID0gcmVxdWlyZSgnLi9zdXBlclNpbmdsZXRvbi5qcycpO1xudmFyIFJlc2l6YWJsZUNTUzNET2JqZWN0ID0gcmVxdWlyZShcIi4vcmVzaXphYmxlQ1NTM0RPYmplY3QuanNcIik7XG52YXIgQ2xvbmVzID0gcmVxdWlyZSgnLi9jbG9uZXMuanMnKTtcblxudmFyIHNpZGVzID0gWyd0b3AnLCAnbGVmdCcsICdib3R0b20nLCAncmlnaHQnXTtcblxuZnVuY3Rpb24gU2hvd2Nhc2Uob3B0aW9ucyl7XG4gICAgXG5cdHZhciAkcHJvamVjdFRpdGxlVGV4dCA9IG9wdGlvbnMubG9nby5maW5kKCcuaG9tZS1sb2dvX19wcm9qZWN0LXRpdGxlJyk7XG5cdHZhciAkY2xpZW50VGV4dCA9IG9wdGlvbnMubG9nby5maW5kKCcuaG9tZS1sb2dvX19jbGllbnQnKTtcbiAgICBcbiAgICB0aGlzLmZvdiA9IG9wdGlvbnMuZm92O1xuICAgIFxuICAgIHZhciAkbG9nbyA9IG9wdGlvbnMubG9nbztcbiAgICB0aGlzLmxvZ28gPSBuZXcgUmVzaXphYmxlQ1NTM0RPYmplY3QoICRsb2dvICk7XG4gICAgXG4gICAgdGhpcy5pbWdzID0gbmV3IENsb25lcyggb3B0aW9ucy5pbWdzLCBvcHRpb25zLmltZ3MuY2xvbmUoKSwgb3B0aW9ucy5pbWdzLmNsb25lKCksIG9wdGlvbnMuaW1ncy5jbG9uZSgpIClcbiAgICAgICAgLnNvcnQoKVxuICAgICAgICAubWFwKGZ1bmN0aW9uKCBpbWdJbmRleCwgc2lkZUluZGV4ICl7XG4gICAgICAgIFxuICAgICAgICAgICAgdmFyICRpbWcgPSB0aGlzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAkaW1nLmRhdGEoJ3RpdGxlJylcbiAgICAgICAgICAgIHZhciBjbGllbnQgPSAkaW1nLmRhdGEoJ2NsaWVudCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiggdGl0bGUgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkaW1nLm1vdXNlZW50ZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBcdFx0JGxvZ28uYWRkQ2xhc3MoJ2hvbWUtbG9nb19zaG93LXByb2plY3QtdGl0bGUnKVxuICAgICAgICBcdFx0XHQkcHJvamVjdFRpdGxlVGV4dC50ZXh0KCB0aXRsZSApO1xuICAgICAgICBcdFx0XHQkY2xpZW50VGV4dC50ZXh0KCBjbGllbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSkubW91c2VsZWF2ZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgJGxvZ28ucmVtb3ZlQ2xhc3MoJ2hvbWUtbG9nb19zaG93LXByb2plY3QtdGl0bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgaW1nM2QgPSBuZXcgU3VwZXJTaW5nbGV0b24oe1xuICAgICAgICAgICAgICAgICRlbGVtZW50OiAkaW1nLFxuICAgICAgICAgICAgICAgIGF4aXM6IHNpZGVJbmRleCAlIDIgPT09IDAgPyAneCcgOiAneSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2goIHNpZGVzW3NpZGVJbmRleF0gKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICAgICAgICAgICAgaW1nM2Qucm90YXRpb24ueCA9IE1hdGguUEkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBpbWczZC5yb3RhdGlvbi56ID0gTWF0aC5QSSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgaW1nM2Qucm90YXRpb24ueSA9IE1hdGguUEkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBpbWczZC5yb3RhdGlvbi54ID0gTWF0aC5QSTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgIGltZzNkLnJvdGF0aW9uLnggPSAtTWF0aC5QSSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGltZzNkLnJvdGF0aW9uLnogPSAtTWF0aC5QSSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGltZzNkLnJvdGF0aW9uLnkgPSAtTWF0aC5QSSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gaW1nM2Q7XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgXG4gICAgdGhpcy5pbWdzLmNvbGxlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oaW1nQ2xvbmVzLCBpLCBsaXN0KXtcbiAgICAgICAgXG4gICAgICAgIHZhciB4ID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgdmFyIHkgPSBpIC8gbGlzdC5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBpbWdDbG9uZXMuZm9yRWFjaChmdW5jdGlvbihpbWcpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbWcuY29udGVudE9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgICAgIHk6IHlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5wcmV2TW91c2UgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuICAgIHRoaXMubW91c2UgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuICAgIHRoaXMuc2xvd2VkTW91c2UgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuICAgIFxufVxuXG5TaG93Y2FzZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgXG4gICAgcmVuZGVyZXIuc2NlbmUuYWRkKCB0aGlzLmxvZ28gKTtcbiAgICBcbiAgICBzY3JvbGwubm9uZSgpO1xuICAgIFxuICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICB0aGlzLmxheW91dCgpO1xuICAgIFxuICAgIHJBRi5zdGFydCggdGhpcy50aWNrLmJpbmQodGhpcykgKTtcbiAgICBcbn1cblxuU2hvd2Nhc2UucHJvdG90eXBlLmxheW91dCA9IGZ1bmN0aW9uKCl7XG4gICAgXG4gICAgdmFyIHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICBcbiAgICB2YXIgbmVhciA9IHV0aWxzLnBlcmZlY3RaKCB0aGlzLmZvdiApO1xuICAgIHZhciBkZXB0aCA9IE1hdGgubWluKHcsIGgpO1xuICAgIFxuICAgIHZhciBmYXIgPSBuZWFyIC0gZGVwdGg7XG4gICAgXG4gICAgdGhpcy5sb2dvLnJlc2l6ZSh3LCBoKTtcbiAgICB0aGlzLmxvZ28ucG9zaXRpb24ueiA9IGZhcjtcbiAgICBcbiAgICB2YXIgaGFsZlcgPSB3LzI7XG4gICAgdmFyIGhhbGZIID0gaC8yO1xuICAgIHZhciBjeiA9IChuZWFyICsgZmFyKSAvIDI7XG4gICAgXG4gICAgdmFyIHBlcmltaXRlciA9IGgqMiArIHcqMjtcbiAgICBcbiAgICB2YXIgbWF4SW1hZ2VIZWlnaHQgPSBNYXRoLm1pbihoLCB3KSAvIDI7XG4gICAgXG4gICAgdGhpcy5pbWdzLmZvckVhY2goZnVuY3Rpb24oaW1nSW5kZXgsIHNpZGVJbmRleCl7XG4gICAgICAgIFxuICAgICAgICB2YXIgaW1nID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIHZhciBpbWdXLCBpbWdIO1xuICAgICAgICBcbiAgICAgICAgaWYgKCBpbWcubmF0aXZlSGVpZ2h0ID4gbWF4SW1hZ2VIZWlnaHQgKSB7XG4gICAgICAgICAgIFxuICAgICAgICAgICBpbWdXID0gKG1heEltYWdlSGVpZ2h0IC8gaW1nLm5hdGl2ZUhlaWdodCkgKiBpbWcubmF0aXZlV2lkdGg7XG4gICAgICAgICAgIGltZ0ggPSBtYXhJbWFnZUhlaWdodDtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbWdXID0gaW1nLm5hdGl2ZVdpZHRoO1xuICAgICAgICAgICAgaW1nSCA9IGltZy5uYXRpdmVIZWlnaHQ7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaW1nLnJlc2l6ZSggaW1nVywgaW1nSCApO1xuICAgICAgICBcbiAgICAgICAgaW1nLmdldFooIG5lYXIsIGZhciApO1xuICAgICAgICBpbWcuc2V0Q29udGVudFNpemUoIGRlcHRoLCBwZXJpbWl0ZXIgKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBkZXB0aE9mZnNldCA9IGltZ0luZGV4IC8gMjA7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2goIHNpZGVzWyBzaWRlSW5kZXggXSApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICAgICAgICBpbWcucG9zaXRpb24ueSA9IGhhbGZIIC0gZGVwdGhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgaW1nLnNldEF4aXNMaW1pdHMoIGhhbGZXLCAtaGFsZlcgKTtcbiAgICAgICAgICAgICAgICBpbWcuc2Nyb2xsT2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICBpbWcuc2Nyb2xsSGVpZ2h0ID0gdztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgIGltZy5wb3NpdGlvbi54ID0gLWhhbGZXICsgZGVwdGhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgaW1nLnNldEF4aXNMaW1pdHMoIGhhbGZILCAtaGFsZkggKTtcbiAgICAgICAgICAgICAgICBpbWcuc2Nyb2xsT2Zmc2V0ID0gdztcbiAgICAgICAgICAgICAgICBpbWcuc2Nyb2xsSGVpZ2h0ID0gaDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgaW1nLnBvc2l0aW9uLnkgPSAtaGFsZkggKyBkZXB0aE9mZnNldDtcbiAgICAgICAgICAgICAgICBpbWcuc2V0QXhpc0xpbWl0cyggLWhhbGZXLCBoYWxmVyApO1xuICAgICAgICAgICAgICAgIGltZy5zY3JvbGxPZmZzZXQgPSB3ICsgaDtcbiAgICAgICAgICAgICAgICBpbWcuc2Nyb2xsSGVpZ2h0ID0gdztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICBpbWcucG9zaXRpb24ueCA9IGhhbGZXIC0gZGVwdGhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgaW1nLnNldEF4aXNMaW1pdHMoIC1oYWxmSCwgaGFsZkggKTtcbiAgICAgICAgICAgICAgICBpbWcuc2Nyb2xsT2Zmc2V0ID0gdyArIGggKyB3O1xuICAgICAgICAgICAgICAgIGltZy5zY3JvbGxIZWlnaHQgPSBoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGltZy5zZXRTY3JvbGwoMCwgcmVuZGVyZXIuc2NlbmUpO1xuICAgICAgICBcbiAgICB9KTtcbiAgICBcbn1cblxuU2hvd2Nhc2UucHJvdG90eXBlLnNldE1vdXNlID0gZnVuY3Rpb24oeCwgeSl7XG4gICAgdGhpcy5tb3VzZS54ID0geCAtIHdpbmRvdy5pbm5lcldpZHRoIC8gMjtcbiAgICB0aGlzLm1vdXNlLnkgPSAtKHkgLSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyKTtcbn1cblxuU2hvd2Nhc2UucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCl7XG4gICAgXG4gICAgckFGLnN0b3AoKTtcbiAgICBcbiAgICByZW5kZXJlci5zY2VuZS5yZW1vdmUodGhpcy5sb2dvKTtcbiAgICBcbiAgICB0aGlzLmltZ3MuZm9yRWFjaChmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLmRldGFjaCggcmVuZGVyZXIuc2NlbmUgKTtcbiAgICB9KVxuICAgIFxufVxuXG5TaG93Y2FzZS5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uKG5vdyl7XG4gICAgXG4gICAgdmFyIHNob3djYXNlID0gdGhpcztcbiAgICBcbiAgICB2YXIgZWxhcHNlZCA9IG5vdyAtIHRoaXMuc3RhcnRUaW1lO1xuICAgIFxuICAgIHRoaXMuc2xvd2VkTW91c2UueCA9IHRoaXMucHJldk1vdXNlLnggKyAoIHRoaXMubW91c2UueCAtIHRoaXMucHJldk1vdXNlLnggKSAqIDAuMTtcbiAgICB0aGlzLnNsb3dlZE1vdXNlLnkgPSB0aGlzLnByZXZNb3VzZS55ICsgKCB0aGlzLm1vdXNlLnkgLSB0aGlzLnByZXZNb3VzZS55ICkgKiAwLjE7XG4gICAgXG4gICAgdmFyIHBlcmltaXRlciA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDIgKyB3aW5kb3cuaW5uZXJXaWR0aCAqIDI7XG4gICAgXG4gICAgdmFyIHNjcm9sbFRvcCA9IChlbGFwc2VkIC8gMTApICUgcGVyaW1pdGVyO1xuICAgIFxuICAgIHRoaXMuaW1ncy5mb3JFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuc2V0U2Nyb2xsKCBzY3JvbGxUb3AsIHJlbmRlcmVyLnNjZW5lICk7XG4gICAgICAgIHRoaXMuc2V0T3BhY2l0eSggc2hvd2Nhc2Uuc2xvd2VkTW91c2UgKTtcbiAgICB9KVxuICAgIFxuICAgIHJlbmRlcmVyLnJlbmRlcigpO1xuICAgIFxuICAgIHRoaXMucHJldk1vdXNlLmNvcHkoIHRoaXMuc2xvd2VkTW91c2UgKTtcbiAgICBcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTaG93Y2FzZTsiLCJmdW5jdGlvbiBTdXBlckZhY2Uob3B0aW9ucyl7XG4gICAgXG4gICAgdGhpcy4kZWxlbWVudCA9IFN1cGVyRmFjZS4kbW9kZWwuY2xvbmUoKTtcbiAgICBcbiAgICB0aGlzLmhvcml6b250YWwgPSBvcHRpb25zLmhvcml6b250YWw7XG4gICAgdGhpcy4kY29udGVudCA9IG9wdGlvbnMuY29udGVudC5jbG9uZSgpO1xuICAgIHRoaXMuJGVsZW1lbnQuYXBwZW5kKCB0aGlzLiRjb250ZW50ICk7XG4gICAgXG4gICAgVEhSRUUuQ1NTM0RPYmplY3QuY2FsbCh0aGlzLCB0aGlzLiRlbGVtZW50WzBdKTtcbiAgICBcbn1cblxuU3VwZXJGYWNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRIUkVFLkNTUzNET2JqZWN0LnByb3RvdHlwZSApO1xuU3VwZXJGYWNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRIUkVFLkNTUzNET2JqZWN0O1xuXG5TdXBlckZhY2UucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiggdywgaCApIHtcbiAgICBcbiAgICBpZiggdyAhPT0gdW5kZWZpbmVkICkgdGhpcy5zZXRXaWR0aCggdyApO1xuICAgIGlmKCBoICE9PSB1bmRlZmluZWQgKSB0aGlzLnNldEhlaWdodCggaCApO1xuXG59XG5cblN1cGVyRmFjZS5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbih3KXtcbiAgICBcbiAgICAvL2lmKHcgPT09IHRoaXMudykgcmV0dXJuO1xuICAgIFxuICAgIGlmKHRoaXMuaG9yaXpvbnRhbCkgdysrO1xuICAgIHRoaXMuJGVsZW1lbnQud2lkdGgoIHcgKTtcbiAgICB0aGlzLncgPSB3O1xuICAgIFxufVxuXG5TdXBlckZhY2UucHJvdG90eXBlLnNldEhlaWdodCA9IGZ1bmN0aW9uKGgpe1xuICAgIFxuICAgIC8vaWYoaCA9PT0gdGhpcy5oKSByZXR1cm47XG4gICAgXG4gICAgaWYoIXRoaXMuaG9yaXpvbnRhbCkgaCsrO1xuICAgIHRoaXMuJGVsZW1lbnQuaGVpZ2h0KCBoICk7XG4gICAgdGhpcy5oID0gaDtcblxufVxuXG5TdXBlckZhY2UucHJvdG90eXBlLnNjcm9sbCA9IGZ1bmN0aW9uKHRvKXtcbiAgICBcbiAgICBpZiggdG8gPT09IHRoaXMuc2Nyb2xsVG9wICkgcmV0dXJuO1xuICAgIFx0XG4gICAgaWYodGhpcy5ob3Jpem9udGFsKXtcbiAgICAgICAgdGhpcy4kY29udGVudC50cmFuc2xhdGUoIC10bywgMCApO1xuICAgICAgICAvL3RoaXMuJGNvbnRlbnRbMF0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCcgKyBNYXRoLnJvdW5kKC10aGlzLnNjcm9sbFRvcCkgKyAncHgsIDAsIDApJztcbiAgICAgICAgLy90aGlzLiRjb250ZW50LmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZTNkKCcgKyAoLXRvICsgJ3B4JykgKyAnLCAwLCAwKScpO1xuXHR9IGVsc2Uge1xuXHQgICAgdGhpcy4kY29udGVudC50cmFuc2xhdGUoIDAsIC10byApO1xuXHQgICAgLy90aGlzLiRjb250ZW50WzBdLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgTWF0aC5yb3VuZCgtdGhpcy5zY3JvbGxUb3ApICsgJ3B4LCAwKSc7XG5cdCAgICAvL3RoaXMuJGNvbnRlbnQuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlM2QoMCwgJyArICgtdG8gKyAncHgnKSArICcsIDApJyk7XG5cdH1cblx0XG5cdHRoaXMuc2Nyb2xsVG9wID0gdG87XG5cdFxufVxuXG5TdXBlckZhY2UuJG1vZGVsID0gJCgnPGRpdiBjbGFzcz1cInN1cGVyLWZhY2VcIj48L2Rpdj4nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdXBlckZhY2U7IiwidmFyIFJlc2l6YWJsZUNTUzNET2JqZWN0ID0gcmVxdWlyZSgnLi9yZXNpemFibGVDU1MzRE9iamVjdC5qcycpO1xuXG5mdW5jdGlvbiBub3JtYWxpemUoeCwgbWluLCBtYXgpe1xuXHRyZXR1cm4gKHgtbWluKSAvIChtYXgtbWluKTtcbn1cblxuZnVuY3Rpb24gc2NhbGUoeCwgb2xkTWluLCBvbGRNYXgsIG5ld01pbiwgbmV3TWF4KXtcbiAgICBpZiggIShvbGRNaW4gPT09IDAgJiYgb2xkTWF4ID09PSAxKSApe1xuICAgICAgICB4ID0gbm9ybWFsaXplKHgsIG9sZE1pbiwgb2xkTWF4KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld01pbiArIHggKiAobmV3TWF4IC0gbmV3TWluKTtcbn1cblxuZnVuY3Rpb24gU3VwZXJTaW5nbGV0b24ob3B0aW9ucyl7XG4gICAgXG4gICAgXy5leHRlbmQodGhpcywgb3B0aW9ucyk7XG4gICAgXG4gICAgdGhpcy5hdHRhY2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuY3JvcHBlZCA9IGZhbHNlO1xuICAgIFxuICAgIHRoaXMubmF0aXZlV2lkdGggPSB0aGlzLiRlbGVtZW50LmRhdGEoJ3dpZHRoJyk7XG4gICAgdGhpcy5uYXRpdmVIZWlnaHQgPSB0aGlzLiRlbGVtZW50LmRhdGEoJ2hlaWdodCcpO1xuICAgIFxuICAgIFJlc2l6YWJsZUNTUzNET2JqZWN0LmNhbGwodGhpcywgdGhpcy4kZWxlbWVudCk7XG4gICAgXG59XG5cblN1cGVyU2luZ2xldG9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFJlc2l6YWJsZUNTUzNET2JqZWN0LnByb3RvdHlwZSApO1xuU3VwZXJTaW5nbGV0b24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVzaXphYmxlQ1NTM0RPYmplY3Q7XG5cblN1cGVyU2luZ2xldG9uLnByb3RvdHlwZS5nZXRaID0gZnVuY3Rpb24obWluLCBtYXgpe1xuICAgIFxuICAgIGlmKG1pbiA8IDApe1xuICAgICAgICBtaW4gKz0gdGhpcy53LzI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbWluIC09IHRoaXMudy8yO1xuICAgIH1cbiAgICBcbiAgICBpZihtYXggPD0gMCl7XG4gICAgICAgIG1heCArPSB0aGlzLncgLyAyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG1heCAtPSB0aGlzLncgLyAyO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnBvc2l0aW9uLnogPSBzY2FsZSh0aGlzLmNvbnRlbnRPZmZzZXQueCwgMCwgMSwgbWluIC0gdGhpcy53LzIsIG1heCArIHRoaXMudy8yKTtcbn1cblxuU3VwZXJTaW5nbGV0b24ucHJvdG90eXBlLnNldENvbnRlbnRTaXplID0gZnVuY3Rpb24odywgaCl7XG4gICAgdmFyIGNlbnRlclkgPSBzY2FsZSh0aGlzLmNvbnRlbnRPZmZzZXQueSwgMCwgMSwgdGhpcy5oLzIsIGggLSB0aGlzLmgvMik7XG4gICAgdGhpcy5ib3VuZHMgPSB7XG4gICAgICAgIGNlbnRlcjogY2VudGVyWSxcbiAgICAgICAgdG9wOiBjZW50ZXJZIC0gdGhpcy5oLzIsXG4gICAgICAgIGJvdHRvbTogY2VudGVyWSArIHRoaXMuaC8yXG4gICAgfTtcbiAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSBoO1xufVxuXG5TdXBlclNpbmdsZXRvbi5wcm90b3R5cGUuc2V0QXhpc0xpbWl0cyA9IGZ1bmN0aW9uKG1pbiwgbWF4KXtcbiAgICBcbiAgICB2YXIgaGFsZkhlaWdodCA9IHRoaXMuaC8yO1xuICAgIFxuICAgIHRoaXMuYXhpc01pbiA9IG1pbjtcbiAgICB0aGlzLmF4aXNNYXggPSBtYXg7XG4gICAgXG4gICAgdGhpcy5jcm9wTWluID0gbWluID4gMCA/IG1pbiAtIGhhbGZIZWlnaHQgKyAxIDogbWluICsgaGFsZkhlaWdodCAtIDE7XG4gICAgdGhpcy5jcm9wTWF4ID0gbWF4ID4gMCA/IG1heCAtIGhhbGZIZWlnaHQgKyAxIDogbWF4ICsgaGFsZkhlaWdodCAtIDE7XG59XG5cblN1cGVyU2luZ2xldG9uLnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbihzY2VuZSl7XG4gICAgaWYodGhpcy5hdHRhY2hlZCkgcmV0dXJuO1xuICAgIHNjZW5lLmFkZCh0aGlzKTtcbiAgICB0aGlzLmF0dGFjaGVkID0gdHJ1ZTtcbn1cblxuU3VwZXJTaW5nbGV0b24ucHJvdG90eXBlLmRldGFjaCA9IGZ1bmN0aW9uKHNjZW5lKXtcbiAgICBpZighdGhpcy5hdHRhY2hlZCkgcmV0dXJuO1xuICAgIHNjZW5lLnJlbW92ZSh0aGlzKTtcbiAgICB0aGlzLmF0dGFjaGVkID0gZmFsc2U7XG59XG5cblN1cGVyU2luZ2xldG9uLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24oKXtcbiAgICBcbiAgICB2YXIgcG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uW3RoaXMuYXhpc107XG4gICAgXG4gICAgdmFyIGNyb3BUb3AgPSAwXG4gICAgdmFyIGNyb3BCb3R0b20gPSAwO1xuICAgIFxuICAgIGlmKHRoaXMuY3JvcE1heCA+IDApe1xuICAgICAgICBpZihwb3NpdGlvbiA+IHRoaXMuY3JvcE1heCkgY3JvcFRvcCA9IHBvc2l0aW9uIC0gdGhpcy5jcm9wTWF4O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKHBvc2l0aW9uIDwgdGhpcy5jcm9wTWF4KSBjcm9wVG9wID0gdGhpcy5jcm9wTWF4IC0gcG9zaXRpb247XG4gICAgfVxuICAgIFxuICAgIGlmKHRoaXMuY3JvcE1pbiA+IDApe1xuICAgICAgICBpZihwb3NpdGlvbiA+IHRoaXMuY3JvcE1pbikgY3JvcEJvdHRvbSA9IHBvc2l0aW9uIC0gdGhpcy5jcm9wTWluO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKHBvc2l0aW9uIDwgdGhpcy5jcm9wTWluKSBjcm9wQm90dG9tID0gdGhpcy5jcm9wTWluIC0gcG9zaXRpb247XG4gICAgfVxuICAgIFxuICAgIHZhciBoID0gdGhpcy5oIC0gY3JvcFRvcCAtIGNyb3BCb3R0b207XG4gICAgXG4gICAgaWYoY3JvcFRvcCl7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQuY3NzKCdoZWlnaHQnLCBoKVxuICAgICAgICB0aGlzLnBvc2l0aW9uW3RoaXMuYXhpc10gKz0gdGhpcy5jcm9wTWF4ID4gMCA/IC1jcm9wVG9wLzIgOiBjcm9wVG9wLzI7XG4gICAgICAgIGlmKHRoaXMuY3JvcHBlZCAhPT0gJ3RvcCcpe1xuICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5jc3MoJ2JhY2tncm91bmRQb3NpdGlvbicsICdjZW50ZXIgYm90dG9tJylcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNyb3BwZWQgPSAndG9wJztcbiAgICB9IGVsc2UgaWYoY3JvcEJvdHRvbSl7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQuY3NzKCdoZWlnaHQnLCBoKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblt0aGlzLmF4aXNdICs9IHRoaXMuY3JvcE1pbiA8IDAgPyBjcm9wQm90dG9tLzIgOiAtY3JvcEJvdHRvbS8yO1xuICAgICAgICBpZih0aGlzLmNyb3BwZWQgIT09ICdib3R0b20nKXtcbiAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuY3NzKCdiYWNrZ3JvdW5kUG9zaXRpb24nLCAnY2VudGVyIHRvcCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3JvcHBlZCA9ICdib3R0b20nO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKHRoaXMuY3JvcHBlZCl7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyIGNlbnRlcicsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jcm9wcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIFxufVxuXG5TdXBlclNpbmdsZXRvbi5wcm90b3R5cGUuc2V0U2Nyb2xsID0gZnVuY3Rpb24odG9wLCBzY2VuZSl7XG4gICAgXG4gICAgdG9wICs9IHRoaXMuc2Nyb2xsT2Zmc2V0O1xuICAgIHZhciBib3R0b20gPSB0b3AgKyB0aGlzLnNjcm9sbEhlaWdodDtcblxuICAgIGlmKCB0b3AgPCB0aGlzLmJvdW5kcy5ib3R0b20gJiYgYm90dG9tID4gdGhpcy5ib3VuZHMudG9wICl7XG4gICAgICAgIHRoaXMuYXR0YWNoKHNjZW5lKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblt0aGlzLmF4aXNdID0gc2NhbGUodGhpcy5ib3VuZHMuY2VudGVyLCB0b3AsIGJvdHRvbSwgdGhpcy5heGlzTWluLCB0aGlzLmF4aXNNYXgpO1xuICAgICAgICB0aGlzLmNyb3AoKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgICBib3R0b20gPiB0aGlzLmNvbnRlbnRIZWlnaHQgJiZcbiAgICAgICAgICAgICggdG9wIC0gdGhpcy5jb250ZW50SGVpZ2h0IDwgdGhpcy5ib3VuZHMuYm90dG9tICYmIGJvdHRvbSAtIHRoaXMuY29udGVudEhlaWdodCA+IHRoaXMuYm91bmRzLnRvcCApXG4gICAgKXtcbiAgICAgICAgdGhpcy5hdHRhY2goc2NlbmUpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uW3RoaXMuYXhpc10gPSBzY2FsZSh0aGlzLmJvdW5kcy5jZW50ZXIsIHRvcCAtIHRoaXMuY29udGVudEhlaWdodCwgYm90dG9tIC0gdGhpcy5jb250ZW50SGVpZ2h0LCB0aGlzLmF4aXNNaW4sIHRoaXMuYXhpc01heCk7XG4gICAgICAgIHRoaXMuY3JvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGV0YWNoKHNjZW5lKTtcbiAgICB9XG4gICAgXG59XG5cblN1cGVyU2luZ2xldG9uLnByb3RvdHlwZS5zZXRPcGFjaXR5ID0gZnVuY3Rpb24oY3Vyc29yKXtcbiAgICBcbiAgICBpZih3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHJldHVybjtcbiAgICBcbiAgICB2YXIgZGlzdGFuY2UgPSBuZXcgVEhSRUUuVmVjdG9yMih0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSkuZGlzdGFuY2VUbyhjdXJzb3IpO1xuICAgIFxuICAgIHZhciBtaW4gPSB3aW5kb3cuaW5uZXJXaWR0aCAqIC4xO1xuICAgIHZhciBtYXggPSB3aW5kb3cuaW5uZXJXaWR0aCAqIDAuNzU7XG4gICAgXG4gICAgdGhpcy4kZWxlbWVudC5jc3MoJ29wYWNpdHknLCBzY2FsZShkaXN0YW5jZSwgbWluLCBtYXgsIDEsIDApICk7XG4gICAgXG59XG5cbm1vZHVsZS5leHBvcnRzID0gU3VwZXJTaW5nbGV0b247IiwiLyoqXG4gKiBCYXNlZCBvbiBodHRwOi8vd3d3LmVtYWdpeC5uZXQvYWNhZGVtaWMvbXNjcy1wcm9qZWN0L2l0ZW0vY2FtZXJhLXN5bmMtd2l0aC1jc3MzLWFuZC13ZWJnbC10aHJlZWpzXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xuICovXG5cblRIUkVFLkNTUzNET2JqZWN0ID0gZnVuY3Rpb24gKCBlbGVtZW50ICkge1xuXG5cdFRIUkVFLk9iamVjdDNELmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXHR0aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXG5cdHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggJ3JlbW92ZWQnLCBmdW5jdGlvbiAoIGV2ZW50ICkge1xuXG5cdFx0aWYgKCB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSAhPT0gbnVsbCApIHtcblxuXHRcdFx0dGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHRoaXMuZWxlbWVudCApO1xuXG5cdFx0fVxuXG5cdH0gKTtcblxufTtcblxuVEhSRUUuQ1NTM0RPYmplY3QucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlICk7XG5USFJFRS5DU1MzRE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUSFJFRS5DU1MzRE9iamVjdDtcblxuVEhSRUUuQ1NTM0RTcHJpdGUgPSBmdW5jdGlvbiAoIGVsZW1lbnQgKSB7XG5cblx0VEhSRUUuQ1NTM0RPYmplY3QuY2FsbCggdGhpcywgZWxlbWVudCApO1xuXG59O1xuXG5USFJFRS5DU1MzRFNwcml0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUSFJFRS5DU1MzRE9iamVjdC5wcm90b3R5cGUgKTtcblRIUkVFLkNTUzNEU3ByaXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRIUkVFLkNTUzNEU3ByaXRlO1xuXG4vL1xuXG5USFJFRS5DU1MzRFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuXG5cdGNvbnNvbGUubG9nKCAnVEhSRUUuQ1NTM0RSZW5kZXJlcicsIFRIUkVFLlJFVklTSU9OICk7XG5cblx0dmFyIF93aWR0aCwgX2hlaWdodDtcblx0dmFyIF93aWR0aEhhbGYsIF9oZWlnaHRIYWxmO1xuXG5cdHZhciBtYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG5cdHZhciBjYWNoZSA9IHtcblx0XHRjYW1lcmE6IHsgZm92OiAwLCBzdHlsZTogJycgfSxcblx0XHRvYmplY3RzOiB7fVxuXHR9O1xuXG5cdHZhciBkb21FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcblx0ZG9tRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXG5cdGRvbUVsZW1lbnQuc3R5bGUuV2Via2l0VHJhbnNmb3JtU3R5bGUgPSAncHJlc2VydmUtM2QnO1xuXHRkb21FbGVtZW50LnN0eWxlLk1velRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcblx0ZG9tRWxlbWVudC5zdHlsZS5vVHJhbnNmb3JtU3R5bGUgPSAncHJlc2VydmUtM2QnO1xuXHRkb21FbGVtZW50LnN0eWxlLnRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcblxuXHR0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50O1xuXG5cdHZhciBjYW1lcmFFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcblxuXHRjYW1lcmFFbGVtZW50LnN0eWxlLldlYmtpdFRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcblx0Y2FtZXJhRWxlbWVudC5zdHlsZS5Nb3pUcmFuc2Zvcm1TdHlsZSA9ICdwcmVzZXJ2ZS0zZCc7XG5cdGNhbWVyYUVsZW1lbnQuc3R5bGUub1RyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcblx0Y2FtZXJhRWxlbWVudC5zdHlsZS50cmFuc2Zvcm1TdHlsZSA9ICdwcmVzZXJ2ZS0zZCc7XG5cblx0ZG9tRWxlbWVudC5hcHBlbmRDaGlsZCggY2FtZXJhRWxlbWVudCApO1xuXG5cdHRoaXMuc2V0Q2xlYXJDb2xvciA9IGZ1bmN0aW9uICgpIHt9O1xuXG5cdHRoaXMuZ2V0U2l6ZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHdpZHRoOiBfd2lkdGgsXG5cdFx0XHRoZWlnaHQ6IF9oZWlnaHRcblx0XHR9O1xuXG5cdH07XG5cblx0dGhpcy5zZXRTaXplID0gZnVuY3Rpb24gKCB3aWR0aCwgaGVpZ2h0ICkge1xuXG5cdFx0X3dpZHRoID0gd2lkdGg7XG5cdFx0X2hlaWdodCA9IGhlaWdodDtcblxuXHRcdF93aWR0aEhhbGYgPSBfd2lkdGggLyAyO1xuXHRcdF9oZWlnaHRIYWxmID0gX2hlaWdodCAvIDI7XG5cblx0XHRkb21FbGVtZW50LnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuXHRcdGRvbUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcblxuXHRcdGNhbWVyYUVsZW1lbnQuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG5cdFx0Y2FtZXJhRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuXG5cdH07XG5cblx0dmFyIGVwc2lsb24gPSBmdW5jdGlvbiAoIHZhbHVlICkge1xuXHRcdFxuXHRcdC8vIGFkZGluZyB0aGUgPSBmaXhlcyBtb2JpbGUgc2FmYXJpXG5cdFx0XG5cdFx0cmV0dXJuIE1hdGguYWJzKCB2YWx1ZSApIDw9IE51bWJlci5FUFNJTE9OID8gMCA6IHZhbHVlO1xuXG5cdH07XG5cblx0dmFyIGdldENhbWVyYUNTU01hdHJpeCA9IGZ1bmN0aW9uICggbWF0cml4ICkge1xuXG5cdFx0dmFyIGVsZW1lbnRzID0gbWF0cml4LmVsZW1lbnRzO1xuXG5cdFx0cmV0dXJuICdtYXRyaXgzZCgnICtcblx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAwIF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyAxIF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMiBdICkgKyAnLCcgK1xuXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDMgXSApICsgJywnICtcblx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyA0IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA1IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgNiBdICkgKyAnLCcgK1xuXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDcgXSApICsgJywnICtcblx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyA4IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA5IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTAgXSApICsgJywnICtcblx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxMSBdICkgKyAnLCcgK1xuXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDEyIF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyAxMyBdICkgKyAnLCcgK1xuXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDE0IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTUgXSApICtcblx0XHQnKSc7XG5cblx0fTtcblxuXHR2YXIgZ2V0T2JqZWN0Q1NTTWF0cml4ID0gZnVuY3Rpb24gKCBtYXRyaXggKSB7XG5cblx0XHR2YXIgZWxlbWVudHMgPSBtYXRyaXguZWxlbWVudHM7XG5cblx0XHRyZXR1cm4gJ3RyYW5zbGF0ZTNkKC01MCUsLTUwJSwwKSBtYXRyaXgzZCgnICtcblx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAwIF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMSBdICkgKyAnLCcgK1xuXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDIgXSApICsgJywnICtcblx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAzIF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA0IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA1IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA2IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA3IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgOCBdICkgKyAnLCcgK1xuXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDkgXSApICsgJywnICtcblx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxMCBdICkgKyAnLCcgK1xuXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDExIF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTIgXSApICsgJywnICtcblx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxMyBdICkgKyAnLCcgK1xuXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDE0IF0gKSArICcsJyArXG5cdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTUgXSApICtcblx0XHQnKSc7XG5cblx0fTtcblxuXHR2YXIgcmVuZGVyT2JqZWN0ID0gZnVuY3Rpb24gKCBvYmplY3QsIGNhbWVyYSApIHtcblxuXHRcdGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuQ1NTM0RPYmplY3QgKSB7XG5cblx0XHRcdHZhciBzdHlsZTtcblxuXHRcdFx0aWYgKCBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5DU1MzRFNwcml0ZSApIHtcblxuXHRcdFx0XHQvLyBodHRwOi8vc3dpZnRjb2Rlci53b3JkcHJlc3MuY29tLzIwMDgvMTEvMjUvY29uc3RydWN0aW5nLWEtYmlsbGJvYXJkLW1hdHJpeC9cblxuXHRcdFx0XHRtYXRyaXguY29weSggY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSApO1xuXHRcdFx0XHRtYXRyaXgudHJhbnNwb3NlKCk7XG5cdFx0XHRcdG1hdHJpeC5jb3B5UG9zaXRpb24oIG9iamVjdC5tYXRyaXhXb3JsZCApO1xuXHRcdFx0XHRtYXRyaXguc2NhbGUoIG9iamVjdC5zY2FsZSApO1xuXG5cdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMyBdID0gMDtcblx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyA3IF0gPSAwO1xuXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDExIF0gPSAwO1xuXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDE1IF0gPSAxO1xuXG5cdFx0XHRcdHN0eWxlID0gZ2V0T2JqZWN0Q1NTTWF0cml4KCBtYXRyaXggKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRzdHlsZSA9IGdldE9iamVjdENTU01hdHJpeCggb2JqZWN0Lm1hdHJpeFdvcmxkICk7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIGVsZW1lbnQgPSBvYmplY3QuZWxlbWVudDtcblx0XHRcdHZhciBjYWNoZWRTdHlsZSA9IGNhY2hlLm9iamVjdHNbIG9iamVjdC5pZCBdO1xuXG5cdFx0XHRpZiAoIGNhY2hlZFN0eWxlID09PSB1bmRlZmluZWQgfHwgY2FjaGVkU3R5bGUgIT09IHN0eWxlICkge1xuXG5cdFx0XHRcdGVsZW1lbnQuc3R5bGUuV2Via2l0VHJhbnNmb3JtID0gc3R5bGU7XG5cdFx0XHRcdGVsZW1lbnQuc3R5bGUuTW96VHJhbnNmb3JtID0gc3R5bGU7XG5cdFx0XHRcdGVsZW1lbnQuc3R5bGUub1RyYW5zZm9ybSA9IHN0eWxlO1xuXHRcdFx0XHRlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IHN0eWxlO1xuXHRcdFx0XHRcblx0XHRcdFx0Y2FjaGUub2JqZWN0c1sgb2JqZWN0LmlkIF0gPSBzdHlsZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGVsZW1lbnQucGFyZW50Tm9kZSAhPT0gY2FtZXJhRWxlbWVudCApIHtcblxuXHRcdFx0XHRjYW1lcmFFbGVtZW50LmFwcGVuZENoaWxkKCBlbGVtZW50ICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZvciAoIHZhciBpID0gMCwgbCA9IG9iamVjdC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRyZW5kZXJPYmplY3QoIG9iamVjdC5jaGlsZHJlblsgaSBdLCBjYW1lcmEgKTtcblxuXHRcdH1cblxuXHR9O1xuXG5cdHRoaXMucmVuZGVyID0gZnVuY3Rpb24gKCBzY2VuZSwgY2FtZXJhICkge1xuXG5cdFx0dmFyIGZvdiA9IDAuNSAvIE1hdGgudGFuKCBUSFJFRS5NYXRoLmRlZ1RvUmFkKCBjYW1lcmEuZm92ICogMC41ICkgKSAqIF9oZWlnaHQ7XG5cblx0XHRpZiAoIGNhY2hlLmNhbWVyYS5mb3YgIT09IGZvdiApIHtcblxuXHRcdFx0ZG9tRWxlbWVudC5zdHlsZS5XZWJraXRQZXJzcGVjdGl2ZSA9IGZvdiArIFwicHhcIjtcblx0XHRcdGRvbUVsZW1lbnQuc3R5bGUuTW96UGVyc3BlY3RpdmUgPSBmb3YgKyBcInB4XCI7XG5cdFx0XHRkb21FbGVtZW50LnN0eWxlLm9QZXJzcGVjdGl2ZSA9IGZvdiArIFwicHhcIjtcblx0XHRcdGRvbUVsZW1lbnQuc3R5bGUucGVyc3BlY3RpdmUgPSBmb3YgKyBcInB4XCI7XG5cblx0XHRcdGNhY2hlLmNhbWVyYS5mb3YgPSBmb3Y7XG5cblx0XHR9XG5cblx0XHRzY2VuZS51cGRhdGVNYXRyaXhXb3JsZCgpO1xuXG5cdFx0aWYgKCBjYW1lcmEucGFyZW50ID09PSBudWxsICkgY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cblx0XHRjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoIGNhbWVyYS5tYXRyaXhXb3JsZCApO1xuXG5cdFx0dmFyIHN0eWxlID0gXCJ0cmFuc2xhdGUzZCgwLDAsXCIgKyBmb3YgKyBcInB4KVwiICsgZ2V0Q2FtZXJhQ1NTTWF0cml4KCBjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlICkgK1xuXHRcdFx0XCIgdHJhbnNsYXRlM2QoXCIgKyBfd2lkdGhIYWxmICsgXCJweCxcIiArIF9oZWlnaHRIYWxmICsgXCJweCwgMClcIjtcblxuXHRcdGlmICggY2FjaGUuY2FtZXJhLnN0eWxlICE9PSBzdHlsZSApIHtcblxuXHRcdFx0Y2FtZXJhRWxlbWVudC5zdHlsZS5XZWJraXRUcmFuc2Zvcm0gPSBzdHlsZTtcblx0XHRcdGNhbWVyYUVsZW1lbnQuc3R5bGUuTW96VHJhbnNmb3JtID0gc3R5bGU7XG5cdFx0XHRjYW1lcmFFbGVtZW50LnN0eWxlLm9UcmFuc2Zvcm0gPSBzdHlsZTtcblx0XHRcdGNhbWVyYUVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gc3R5bGU7XG5cblx0XHRcdGNhY2hlLmNhbWVyYS5zdHlsZSA9IHN0eWxlO1xuXG5cdFx0fVxuXG5cdFx0cmVuZGVyT2JqZWN0KCBzY2VuZSwgY2FtZXJhICk7XG5cblx0fTtcblxufTsiLCJ2YXIgcmVuZGVyZXIgPSByZXF1aXJlKCcuL21haW4uanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgXG4gICAgcGVyZmVjdFo6IGZ1bmN0aW9uIChmb3Ype1xuICAgICAgICByZXR1cm4gLSggcmVuZGVyZXIuZ2V0U2l6ZSgpLmhlaWdodCAvMikgLyBNYXRoLnRhbiggVEhSRUUuTWF0aC5kZWdUb1JhZCggZm92IC8gMiApICk7XG4gICAgfSxcbiAgICBcbiAgICBmb3ZYOiBmdW5jdGlvbiAoZm92WSl7XG4gICAgICAgIFxuICAgICAgICB2YXIgc2l6ZSA9IHJlbmRlcmVyLmdldFNpemUoKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBmb3ZZX3JhZCA9IFRIUkVFLk1hdGguZGVnVG9SYWQoIGZvdlkgKTtcbiAgICAgICAgdmFyIGFzcGVjdCA9IHNpemUud2lkdGggLyBzaXplLmhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIHZhciBmb3ZYX3JhZCA9IDIgKiBNYXRoLmF0YW4oIGFzcGVjdCAqIE1hdGgudGFuKCBmb3ZZX3JhZCAvIDIpICk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gVEhSRUUuTWF0aC5yYWRUb0RlZyggZm92WF9yYWQgKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxufSIsIi8qISBtb2Rlcm5penIgMy4zLjEgKEN1c3RvbSBCdWlsZCkgfCBNSVQgKlxuICogaHR0cHM6Ly9tb2Rlcm5penIuY29tL2Rvd25sb2FkLz8tcHJlZml4ZWQtc2V0Y2xhc3NlcyAhKi9cbiFmdW5jdGlvbihlLG4sdCl7ZnVuY3Rpb24gcihlLG4pe3JldHVybiB0eXBlb2YgZT09PW59ZnVuY3Rpb24gbygpe3ZhciBlLG4sdCxvLGkscyxhO2Zvcih2YXIgZiBpbiBnKWlmKGcuaGFzT3duUHJvcGVydHkoZikpe2lmKGU9W10sbj1nW2ZdLG4ubmFtZSYmKGUucHVzaChuLm5hbWUudG9Mb3dlckNhc2UoKSksbi5vcHRpb25zJiZuLm9wdGlvbnMuYWxpYXNlcyYmbi5vcHRpb25zLmFsaWFzZXMubGVuZ3RoKSlmb3IodD0wO3Q8bi5vcHRpb25zLmFsaWFzZXMubGVuZ3RoO3QrKyllLnB1c2gobi5vcHRpb25zLmFsaWFzZXNbdF0udG9Mb3dlckNhc2UoKSk7Zm9yKG89cihuLmZuLFwiZnVuY3Rpb25cIik/bi5mbigpOm4uZm4saT0wO2k8ZS5sZW5ndGg7aSsrKXM9ZVtpXSxhPXMuc3BsaXQoXCIuXCIpLDE9PT1hLmxlbmd0aD9Nb2Rlcm5penJbYVswXV09bzooIU1vZGVybml6clthWzBdXXx8TW9kZXJuaXpyW2FbMF1daW5zdGFuY2VvZiBCb29sZWFufHwoTW9kZXJuaXpyW2FbMF1dPW5ldyBCb29sZWFuKE1vZGVybml6clthWzBdXSkpLE1vZGVybml6clthWzBdXVthWzFdXT1vKSx5LnB1c2goKG8/XCJcIjpcIm5vLVwiKSthLmpvaW4oXCItXCIpKX19ZnVuY3Rpb24gaShlKXt2YXIgbj1fLmNsYXNzTmFtZSx0PU1vZGVybml6ci5fY29uZmlnLmNsYXNzUHJlZml4fHxcIlwiO2lmKHcmJihuPW4uYmFzZVZhbCksTW9kZXJuaXpyLl9jb25maWcuZW5hYmxlSlNDbGFzcyl7dmFyIHI9bmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK3QrXCJuby1qcyhcXFxcc3wkKVwiKTtuPW4ucmVwbGFjZShyLFwiJDFcIit0K1wianMkMlwiKX1Nb2Rlcm5penIuX2NvbmZpZy5lbmFibGVDbGFzc2VzJiYobis9XCIgXCIrdCtlLmpvaW4oXCIgXCIrdCksdz9fLmNsYXNzTmFtZS5iYXNlVmFsPW46Xy5jbGFzc05hbWU9bil9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZS5yZXBsYWNlKC8oW2Etel0pLShbYS16XSkvZyxmdW5jdGlvbihlLG4sdCl7cmV0dXJuIG4rdC50b1VwcGVyQ2FzZSgpfSkucmVwbGFjZSgvXi0vLFwiXCIpfWZ1bmN0aW9uIGEoZSxuKXtyZXR1cm4hIX4oXCJcIitlKS5pbmRleE9mKG4pfWZ1bmN0aW9uIGYoKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiBuLmNyZWF0ZUVsZW1lbnQ/bi5jcmVhdGVFbGVtZW50KGFyZ3VtZW50c1swXSk6dz9uLmNyZWF0ZUVsZW1lbnROUy5jYWxsKG4sXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLGFyZ3VtZW50c1swXSk6bi5jcmVhdGVFbGVtZW50LmFwcGx5KG4sYXJndW1lbnRzKX1mdW5jdGlvbiBsKGUsbil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkobixhcmd1bWVudHMpfX1mdW5jdGlvbiB1KGUsbix0KXt2YXIgbztmb3IodmFyIGkgaW4gZSlpZihlW2ldaW4gbilyZXR1cm4gdD09PSExP2VbaV06KG89bltlW2ldXSxyKG8sXCJmdW5jdGlvblwiKT9sKG8sdHx8bik6byk7cmV0dXJuITF9ZnVuY3Rpb24gcChlKXtyZXR1cm4gZS5yZXBsYWNlKC8oW0EtWl0pL2csZnVuY3Rpb24oZSxuKXtyZXR1cm5cIi1cIituLnRvTG93ZXJDYXNlKCl9KS5yZXBsYWNlKC9ebXMtLyxcIi1tcy1cIil9ZnVuY3Rpb24gZCgpe3ZhciBlPW4uYm9keTtyZXR1cm4gZXx8KGU9Zih3P1wic3ZnXCI6XCJib2R5XCIpLGUuZmFrZT0hMCksZX1mdW5jdGlvbiBjKGUsdCxyLG8pe3ZhciBpLHMsYSxsLHU9XCJtb2Rlcm5penJcIixwPWYoXCJkaXZcIiksYz1kKCk7aWYocGFyc2VJbnQociwxMCkpZm9yKDtyLS07KWE9ZihcImRpdlwiKSxhLmlkPW8/b1tyXTp1KyhyKzEpLHAuYXBwZW5kQ2hpbGQoYSk7cmV0dXJuIGk9ZihcInN0eWxlXCIpLGkudHlwZT1cInRleHQvY3NzXCIsaS5pZD1cInNcIit1LChjLmZha2U/YzpwKS5hcHBlbmRDaGlsZChpKSxjLmFwcGVuZENoaWxkKHApLGkuc3R5bGVTaGVldD9pLnN0eWxlU2hlZXQuY3NzVGV4dD1lOmkuYXBwZW5kQ2hpbGQobi5jcmVhdGVUZXh0Tm9kZShlKSkscC5pZD11LGMuZmFrZSYmKGMuc3R5bGUuYmFja2dyb3VuZD1cIlwiLGMuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIixsPV8uc3R5bGUub3ZlcmZsb3csXy5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLF8uYXBwZW5kQ2hpbGQoYykpLHM9dChwLGUpLGMuZmFrZT8oYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpLF8uc3R5bGUub3ZlcmZsb3c9bCxfLm9mZnNldEhlaWdodCk6cC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHApLCEhc31mdW5jdGlvbiBtKG4scil7dmFyIG89bi5sZW5ndGg7aWYoXCJDU1NcImluIGUmJlwic3VwcG9ydHNcImluIGUuQ1NTKXtmb3IoO28tLTspaWYoZS5DU1Muc3VwcG9ydHMocChuW29dKSxyKSlyZXR1cm4hMDtyZXR1cm4hMX1pZihcIkNTU1N1cHBvcnRzUnVsZVwiaW4gZSl7Zm9yKHZhciBpPVtdO28tLTspaS5wdXNoKFwiKFwiK3AobltvXSkrXCI6XCIrcitcIilcIik7cmV0dXJuIGk9aS5qb2luKFwiIG9yIFwiKSxjKFwiQHN1cHBvcnRzIChcIitpK1wiKSB7ICNtb2Rlcm5penIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IH0gfVwiLGZ1bmN0aW9uKGUpe3JldHVyblwiYWJzb2x1dGVcIj09Z2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLnBvc2l0aW9ufSl9cmV0dXJuIHR9ZnVuY3Rpb24gdihlLG4sbyxpKXtmdW5jdGlvbiBsKCl7cCYmKGRlbGV0ZSBOLnN0eWxlLGRlbGV0ZSBOLm1vZEVsZW0pfWlmKGk9cihpLFwidW5kZWZpbmVkXCIpPyExOmksIXIobyxcInVuZGVmaW5lZFwiKSl7dmFyIHU9bShlLG8pO2lmKCFyKHUsXCJ1bmRlZmluZWRcIikpcmV0dXJuIHV9Zm9yKHZhciBwLGQsYyx2LGgseT1bXCJtb2Rlcm5penJcIixcInRzcGFuXCIsXCJzYW1wXCJdOyFOLnN0eWxlJiZ5Lmxlbmd0aDspcD0hMCxOLm1vZEVsZW09Zih5LnNoaWZ0KCkpLE4uc3R5bGU9Ti5tb2RFbGVtLnN0eWxlO2ZvcihjPWUubGVuZ3RoLGQ9MDtjPmQ7ZCsrKWlmKHY9ZVtkXSxoPU4uc3R5bGVbdl0sYSh2LFwiLVwiKSYmKHY9cyh2KSksTi5zdHlsZVt2XSE9PXQpe2lmKGl8fHIobyxcInVuZGVmaW5lZFwiKSlyZXR1cm4gbCgpLFwicGZ4XCI9PW4/djohMDt0cnl7Ti5zdHlsZVt2XT1vfWNhdGNoKGcpe31pZihOLnN0eWxlW3ZdIT1oKXJldHVybiBsKCksXCJwZnhcIj09bj92OiEwfXJldHVybiBsKCksITF9ZnVuY3Rpb24gaChlLG4sdCxvLGkpe3ZhciBzPWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxhPShlK1wiIFwiK1Muam9pbihzK1wiIFwiKStzKS5zcGxpdChcIiBcIik7cmV0dXJuIHIobixcInN0cmluZ1wiKXx8cihuLFwidW5kZWZpbmVkXCIpP3YoYSxuLG8saSk6KGE9KGUrXCIgXCIrRS5qb2luKHMrXCIgXCIpK3MpLnNwbGl0KFwiIFwiKSx1KGEsbix0KSl9dmFyIHk9W10sZz1bXSxDPXtfdmVyc2lvbjpcIjMuMy4xXCIsX2NvbmZpZzp7Y2xhc3NQcmVmaXg6XCJcIixlbmFibGVDbGFzc2VzOiEwLGVuYWJsZUpTQ2xhc3M6ITAsdXNlUHJlZml4ZXM6ITB9LF9xOltdLG9uOmZ1bmN0aW9uKGUsbil7dmFyIHQ9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bih0W2VdKX0sMCl9LGFkZFRlc3Q6ZnVuY3Rpb24oZSxuLHQpe2cucHVzaCh7bmFtZTplLGZuOm4sb3B0aW9uczp0fSl9LGFkZEFzeW5jVGVzdDpmdW5jdGlvbihlKXtnLnB1c2goe25hbWU6bnVsbCxmbjplfSl9fSxNb2Rlcm5penI9ZnVuY3Rpb24oKXt9O01vZGVybml6ci5wcm90b3R5cGU9QyxNb2Rlcm5penI9bmV3IE1vZGVybml6cjt2YXIgXz1uLmRvY3VtZW50RWxlbWVudCx3PVwic3ZnXCI9PT1fLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkseD1cIk1veiBPIG1zIFdlYmtpdFwiLFM9Qy5fY29uZmlnLnVzZVByZWZpeGVzP3guc3BsaXQoXCIgXCIpOltdO0MuX2Nzc29tUHJlZml4ZXM9Uzt2YXIgYj1mdW5jdGlvbihuKXt2YXIgcixvPXByZWZpeGVzLmxlbmd0aCxpPWUuQ1NTUnVsZTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgaSlyZXR1cm4gdDtpZighbilyZXR1cm4hMTtpZihuPW4ucmVwbGFjZSgvXkAvLFwiXCIpLHI9bi5yZXBsYWNlKC8tL2csXCJfXCIpLnRvVXBwZXJDYXNlKCkrXCJfUlVMRVwiLHIgaW4gaSlyZXR1cm5cIkBcIituO2Zvcih2YXIgcz0wO28+cztzKyspe3ZhciBhPXByZWZpeGVzW3NdLGY9YS50b1VwcGVyQ2FzZSgpK1wiX1wiK3I7aWYoZiBpbiBpKXJldHVyblwiQC1cIithLnRvTG93ZXJDYXNlKCkrXCItXCIrbn1yZXR1cm4hMX07Qy5hdFJ1bGU9Yjt2YXIgRT1DLl9jb25maWcudXNlUHJlZml4ZXM/eC50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKTpbXTtDLl9kb21QcmVmaXhlcz1FO3ZhciB6PXtlbGVtOmYoXCJtb2Rlcm5penJcIil9O01vZGVybml6ci5fcS5wdXNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHouZWxlbX0pO3ZhciBOPXtzdHlsZTp6LmVsZW0uc3R5bGV9O01vZGVybml6ci5fcS51bnNoaWZ0KGZ1bmN0aW9uKCl7ZGVsZXRlIE4uc3R5bGV9KSxDLnRlc3RBbGxQcm9wcz1oO0MucHJlZml4ZWQ9ZnVuY3Rpb24oZSxuLHQpe3JldHVybiAwPT09ZS5pbmRleE9mKFwiQFwiKT9iKGUpOigtMSE9ZS5pbmRleE9mKFwiLVwiKSYmKGU9cyhlKSksbj9oKGUsbix0KTpoKGUsXCJwZnhcIikpfTtvKCksaSh5KSxkZWxldGUgQy5hZGRUZXN0LGRlbGV0ZSBDLmFkZEFzeW5jVGVzdDtmb3IodmFyIFA9MDtQPE1vZGVybml6ci5fcS5sZW5ndGg7UCsrKU1vZGVybml6ci5fcVtQXSgpO2UuTW9kZXJuaXpyPU1vZGVybml6cn0od2luZG93LGRvY3VtZW50KTtcblxuZnVuY3Rpb24gdmlkZW9VcmxUb0VtYmVkKHVybCl7XG5cdFxuXHR2YXIgdmltZW9SZSA9IC9odHRwcz86XFwvXFwvKD86d3d3XFwufHBsYXllclxcLik/dmltZW8uY29tXFwvKD86Y2hhbm5lbHNcXC8oPzpcXHcrXFwvKT98Z3JvdXBzXFwvKFteXFwvXSopXFwvdmlkZW9zXFwvfGFsYnVtXFwvKFxcZCspXFwvdmlkZW9cXC98dmlkZW9cXC98KShcXGQrKSg/OiR8XFwvfFxcPykvO1xuXHR2YXIgeW91dHViZVJlID0gL14uKigoeW91dHUuYmVcXC8pfCh2XFwvKXwoXFwvdVxcL1xcd1xcLyl8KGVtYmVkXFwvKXwod2F0Y2hcXD8pKVxcPz92Pz0/KFteI1xcJlxcP10qKS4qLztcblx0dmFyIG1hdGNoLCBpZDtcblx0XG5cdGlmKHVybC5pbmRleE9mKCd2aW1lbycpID4gLTEpe1xuXHRcdG1hdGNoID0gdXJsLm1hdGNoKHZpbWVvUmUpO1xuXHRcdGlkID0gbWF0Y2hbM107XG5cdFx0cmV0dXJuICdodHRwczovL3BsYXllci52aW1lby5jb20vdmlkZW8vJyArIGlkO1xuXHR9IGVsc2Uge1xuXHRcdG1hdGNoID0gdXJsLm1hdGNoKHlvdXR1YmVSZSk7XG5cdFx0aWQgPSBtYXRjaFs3XTtcblx0XHRyZXR1cm4gXCIvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9cIiArIGlkICsgXCI/c2hvd2luZm89MFwiO1xuXHR9XG5cdFxufVxuXG52YXIgUFJFRklYRURfVFJBTlNGT1JNID0gTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKTtcblxudmFyICR3aW5kb3cgPSAkKCd3aW5kb3cnKTtcblxuJC5mbi50cmFuc2xhdGUgPSBmdW5jdGlvbih4LCB5KXtcbiAgICBcbiAgICB0aGlzWzBdLnN0eWxlW1BSRUZJWEVEX1RSQU5TRk9STV0gPSAndHJhbnNsYXRlKCcgKyB4ICsgJ3B4LCAnICsgeSArICdweCknO1xuICAgIFxufVxuXG52YXIgc2l6ZXMgPSB7XG4gICAgc21hbGw6IDMwMCxcbiAgICBtZWRpdW06IDYwMCxcbiAgICBsYXJnZTogMTIwMCxcbiAgICB4bGFyZ2U6IDIwMDBcbn1cblxudmFyIERQUiA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG5cbiQuZm4ubG9hZEltYWdlcyA9IGZ1bmN0aW9uKCl7XG4gICAgXG4gICAgdmFyIGVsID0gdGhpcy5oYXNDbGFzcygncnNwLWltZycpID8gdGhpcyA6IHRoaXMuZmluZCgnLnJzcC1pbWcnKTtcbiAgICBcbiAgICBlbC5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIFxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gZ28oKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gc2V0U3JjKHNpemUpe1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBzcmMgPSAkdGhpcy5kYXRhKCdzcmMtJyArIHNpemUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkdGhpcy5pcygnaW1nJykgKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmF0dHIoJ3NyYycsIHNyYyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCgnICsgc3JjICsgJyknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB3ID0gJHRoaXMud2lkdGgoKSAqIERQUjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yKHZhciBzaXplIGluIHNpemVzKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiggdyA8IHNpemVzW3NpemVdICkge1xuICAgICAgICAgICAgICAgICAgICBzZXRTcmMoIHNpemUgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0U3JjKCd4bGFyZ2UnKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBnbygpO1xuICAgICAgICBcbiAgICAgICAgJHdpbmRvdy5vbigncmVzaXplJywgZ28pO1xuICAgICAgICBcbiAgICAgICAgLypcbiAgICAgICAgJHdpbmRvdy5vbigncm91dGVjaGFuZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHdpbmRvdy5vZmYoJ3Jlc2l6ZScsIGdvKTtcbiAgICAgICAgfSlcbiAgICAgICAgKi9cbiAgICAgICAgXG4gICAgfSlcbiAgICBcbn1cblxuJC5mbi5sb2FkVmlkZW8gPSBmdW5jdGlvbigpe1xuICAgIFxuICAgIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgdmlkZW9VcmwgPSAkdGhpcy5kYXRhKCd2aWRlby11cmwnKTtcbiAgICAgICAgdmFyICRpZnJhbWUgPSAkKCc8aWZyYW1lPicpO1xuICAgICAgICAkaWZyYW1lLmF0dHIoe1xuICAgICAgICAgICAgc3JjOiB2aWRlb1VybFRvRW1iZWQodmlkZW9VcmwpLFxuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgIGhlaWdodDogJzEwMCUnXG4gICAgICAgIH0pO1xuICAgICAgICAkdGhpcy5hcHBlbmQoICRpZnJhbWUgKTtcbiAgICB9KSAgICBcbiAgICBcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBcbiAgICBlbGVtZW50OiAnbWFpbicsXG4gICAgXG4gICAgcm91dGVzOiB7XG4gICAgICAgICcvJzogJ2hvbWUnLFxuICAgICAgICAnL3dvcmsnOiAnd29yaycsXG4gICAgICAgICcvYXJjaGl2ZSc6ICd3b3JrJyxcbiAgICAgICAgJy9pbmZvJzogJ2luZm8nLFxuICAgICAgICAnL3Byb2plY3QvOnNsdWcnOiAncHJvamVjdCcsXG4gICAgICAgICcvcG9zdC86c2x1Zyc6ICdwb3N0J1xuICAgIH1cbiAgICBcbn0iLCJ2YXIgaGFuZGxlcnMgPSB7fTtcblxuZnVuY3Rpb24gb24oZXZ0cyl7XG4gICAgXG4gICAgZm9yICggdmFyIG5hbWUgaW4gZXZ0cyApIHtcbiAgICAgICAgXG4gICAgICAgIGlmKCAhaGFuZGxlcnNbIG5hbWUgXSApIGhhbmRsZXJzWyBuYW1lIF0gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGhhbmRsZXJzWyBuYW1lIF0ucHVzaCggZXZ0c1sgbmFtZSBdICk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuZnVuY3Rpb24gb2ZmKCl7XG4gICAgXG4gICAgaGFuZGxlcnMgPSB7fTtcbiAgICBcbn1cblxuZnVuY3Rpb24gdHJpZ2dlcihldnQpe1xuICAgIFxuICAgIHZhciBmbnMgPSBoYW5kbGVyc1tldnRdO1xuICAgIFxuICAgIGlmKCAhZm5zICkgcmV0dXJuO1xuICAgIFxuICAgIHZhciBhcmdzID0gW107XG4gICAgXG4gICAgZm9yKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKCBhcmd1bWVudHNbaV0gKTtcbiAgICBcbiAgICB2YXIgcmV0LCByZXN1bHQ7XG4gICAgXG4gICAgZm9yICggdmFyIGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrICkge1xuICAgICAgICBcbiAgICAgICAgcmV0ID0gZm5zW2ldLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICBcbiAgICAgICAgaWYoIHJlc3VsdCAhPT0gcmV0ICkgcmVzdWx0ID0gcmV0O1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgICBcbn1cblxuJCh3aW5kb3cpXG4gICAgLm9uKCAnc2Nyb2xsJywgdHJpZ2dlci5iaW5kKCBudWxsLCAnc2Nyb2xsJyApIClcbiAgICAub24oICdyZXNpemUnLCB0cmlnZ2VyLmJpbmQoIG51bGwsICdyZXNpemUnICkgKVxuICAgIC5vbiggJ21vdXNlbW92ZScsIHRyaWdnZXIuYmluZCggbnVsbCwgJ21vdXNlbW92ZScgKSApXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIG9uOiBvbixcbiAgICBvZmY6IG9mZixcbiAgICB0cmlnZ2VyOiB0cmlnZ2VyXG59IiwidmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnLmpzJylcbmNvbmZpZy4kZWxlbWVudCA9ICQoY29uZmlnLmVsZW1lbnQpO1xuXG52YXIgY29tbW9uID0gcmVxdWlyZSgnLi9yb3V0ZXMvY29tbW9uLmpzJyk7XG52YXIgaG9tZSA9IHJlcXVpcmUoJy4vcm91dGVzL2hvbWUuanMnKTtcbnZhciBpbmZvID0gcmVxdWlyZSgnLi9yb3V0ZXMvaW5mby5qcycpO1xudmFyIHdvcmsgPSByZXF1aXJlKCcuL3JvdXRlcy93b3JrLmpzJyk7XG52YXIgcHJvamVjdCA9IHJlcXVpcmUoJy4vcm91dGVzL3Byb2plY3QuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpe1xuICAgIFxuICAgIGlmKCAhJCgnYm9keScpLmhhc0NsYXNzKCdob2xkaW5nJykgKSBwYWdlLmJhc2UoJy9pbmRleC5waHAnKTtcbiAgICBwYWdlKCAnKicsIGNvbW1vbi5nZXRUZW1wbGF0ZSwgY29tbW9uLnRyYW5zaXRpb25PdXQsIGNvbW1vbi5nbyApO1xuICAgIHBhZ2UoICcvJywgaG9tZSApO1xuICAgIHBhZ2UoICcvaG9tZScsIGhvbWUgKTtcbiAgICBwYWdlKCAnL2luZm8nLCBpbmZvICk7XG4gICAgcGFnZSggJy93b3JrJywgd29yayApO1xuICAgIHBhZ2UoICcvcHJvamVjdC86c2x1ZycsIHByb2plY3QgKTtcbiAgICBwYWdlKCAnL2FyY2hpdmUnLCB3b3JrICk7XG4gICAgcGFnZSggJy9zZXJ2aWNlcy11bmtub3duJywgd29yayApO1xuICAgIHBhZ2UoICcvcG9zdC86c2x1ZycsIHByb2plY3QgKTtcbiAgICBwYWdlKCk7XG4gICAgXG59OyIsIm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGdldFRlbXBsYXRlOiBnZXRUZW1wbGF0ZSxcbiAgICB0cmFuc2l0aW9uT3V0OiB0cmFuc2l0aW9uT3V0LFxuICAgIGdvOiBnb1xufTtcblxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZy5qcycpXG52YXIgc2VsZWN0b3IgPSBjb25maWcuZWxlbWVudDtcbnZhciByb3V0ZXMgPSBjb25maWcucm91dGVzO1xudmFyICRlbGVtZW50ID0gY29uZmlnLiRlbGVtZW50O1xudmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG52YXIgJGxvYWRpbmcgPSAkKCcubG9hZGluZycpO1xuXG52YXIgZXZlbnRzID0gcmVxdWlyZSgnLi4vZXZlbnRzLmpzJyk7XG5cbnZhciAkaHRtbEJvZHkgPSAkKCdodG1sLCBib2R5Jyk7XG52YXIgJGJvZHkgPSAkKCdib2R5Jyk7XG5cbnZhciBmaXJzdExvYWQgPSByZXF1aXJlKCcuLi8uLi9maXJzdExvYWQuanMnKTtcblxudmFyIHRlbXBsYXRlQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gc2F2ZVRlbXBsYXRlKGh0bWwsIGN0eCl7XG4gICAgXG4gICAgdmFyIHRlbXBsYXRlID0gJChodG1sKS5maWx0ZXIoc2VsZWN0b3IpLmNoaWxkcmVuKCk7XG4gICAgXG4gICAgY3R4LnRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZVsgY3R4LnBhdGggXSA9IHRlbXBsYXRlO1xuXG59XG5cbiBmdW5jdGlvbiBnZXRUZW1wbGF0ZShjdHgsIG5leHQpe1xuICAgICBcbiAgICAgJGxvYWRpbmcuYWRkQ2xhc3MoJ29uJyk7XG4gICAgXG4gICAgdmFyIGNhY2hlZCA9IHRlbXBsYXRlQ2FjaGVbIGN0eC5wYXRoIF07XG4gICAgXG4gICAgaWYoIGNhY2hlZCApIHtcbiAgICAgICAgXG4gICAgICAgIGN0eC50ZW1wbGF0ZSA9IGNhY2hlZDtcblxuICAgICAgICBuZXh0KCk7XG4gICAgICAgIFxuICAgIH0gZWxzZSBpZiggZmlyc3RMb2FkLmlzICkge1xuICAgICAgICBcbiAgICAgICAgc2F2ZVRlbXBsYXRlKCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MLCBjdHggKTtcbiAgICAgICAgXG4gICAgICAgICRlbGVtZW50LmVtcHR5KCkuZGV0YWNoKCk7XG4gICAgICAgIFxuICAgICAgICBuZXh0KCk7XG4gICAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICQuZ2V0KCBjdHgucGF0aCwgZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzYXZlVGVtcGxhdGUoIHJlc3BvbnNlLCBjdHggKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuZnVuY3Rpb24gdHJhbnNpdGlvbk91dChjdHgsIG5leHQpe1xuICAgIFxuICAgICRsb2FkaW5nLnJlbW92ZUNsYXNzKCdvbicpO1xuICAgIFxuICAgIHZhciBkZWxheSA9IGV2ZW50cy50cmlnZ2VyKCd0cmFuc2l0aW9uT3V0Jyk7XG4gICAgXG4gICAgaWYoIGRlbGF5ICl7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCBuZXh0LCBkZWxheSApO1xuICAgICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgbmV4dCgpO1xuICAgICAgICBcbiAgICB9XG4gICAgXG59XG5cbmZ1bmN0aW9uIGdvKGN0eCwgbmV4dCl7XG4gICAgXG4gICAgZXZlbnRzLnRyaWdnZXIoJ3JlbW92ZScpO1xuICAgIFxuICAgIGV2ZW50cy5vZmYoKTtcbiAgICBcbiAgICAkaHRtbEJvZHkuc2Nyb2xsTGVmdCgwKS5zY3JvbGxUb3AoMCk7XG4gICAgXG4gICAgdmFyIHJvdXRlTmFtZSA9IGN0eC5wYXRoID09PSAnLycgPyAnaG9tZScgOiBjdHgucGF0aC5zcGxpdCgnLycpWzFdO1xuICAgIFxuICAgICRib2R5LnJlbW92ZUNsYXNzIChmdW5jdGlvbiAoaW5kZXgsIGNsYXNzTmFtZSkge1xuICAgICAgICByZXR1cm4gKGNsYXNzTmFtZS5tYXRjaCAoLyhefFxccylwYWdlLVxcUysvZykgfHwgW10pLmpvaW4oJyAnKTtcbiAgICB9KS5hZGRDbGFzcyggJ3BhZ2UtJyArIHJvdXRlTmFtZSApO1xuICAgIFxuICAgICR3aW5kb3cudHJpZ2dlcigncm91dGVjaGFuZ2UnKTtcbiAgICBcbiAgICBuZXh0KCk7XG4gICAgXG59IiwidmFyIG5hdmlnYXRpb24gPSByZXF1aXJlKCcuLi8uLi9uYXZpZ2F0aW9uLmpzJyk7XG5cbnZhciBTaG93Y2FzZSA9IHJlcXVpcmUoJy4uLy4uL3JlbmRlcmVyL3Nob3djYXNlLmpzJyk7XG52YXIgZXZlbnRzID0gcmVxdWlyZSgnLi4vZXZlbnRzLmpzJyk7XG5cbnZhciBmb3YgPSA2MDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjdHgsIG5leHQpe1xuICAgIFxuICAgIHZhciBzaG93Y2FzZSA9IG5ldyBTaG93Y2FzZSh7XG4gICAgICAgIGxvZ286IGN0eC50ZW1wbGF0ZS5maWx0ZXIoJy5ob21lLWxvZ28nKSxcbiAgICAgICAgaW1nczogY3R4LnRlbXBsYXRlLmZpbHRlcignLmhvbWUtaW1nJyksXG4gICAgICAgIGZvdjogZm92XG4gICAgfSk7XG4gICAgXG4gICAgc2hvd2Nhc2UubG9nby4kZWxlbWVudC5hZGRDbGFzcygnZmFkZS1vdXQnKTtcbiAgICBzaG93Y2FzZS5pbWdzLmZvckVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcygnZmFkZS1vdXQnKTtcbiAgICB9KVxuICAgIFxuICAgIHNob3djYXNlLmluaXQoKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHNob3djYXNlLmxvZ28uJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgIHNob3djYXNlLmltZ3MuZm9yRWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygnZmFkZS1vdXQnKTtcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICBcbiAgICBzaG93Y2FzZS5sb2dvLiRlbGVtZW50LmFkZENsYXNzKCdmYWRlLW91dCcpO1xuICAgIHNob3djYXNlLmltZ3MuZm9yRWFjaChmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKCdmYWRlLW91dCcpO1xuICAgIH0pXG4gICAgXG4gICAgbmF2aWdhdGlvbi5oaWRlKCk7XG4gICAgXG4gICAgZXZlbnRzLm9uKHtcbiAgICAgICAgXG4gICAgICAgIHJlc2l6ZTogc2hvd2Nhc2UubGF5b3V0LmJpbmQoc2hvd2Nhc2UpLFxuICAgICAgICBcbiAgICAgICAgbW91c2Vtb3ZlOiBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2hvd2Nhc2Uuc2V0TW91c2UoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICB0cmFuc2l0aW9uT3V0OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzaG93Y2FzZS5pbWdzLmZvckVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKCdmYWRlLW91dCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2hvd2Nhc2UubG9nby4kZWxlbWVudC5hZGRDbGFzcygnZmFkZS1vdXQnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIDEwMDA7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHJlbW92ZTogc2hvd2Nhc2UucmVtb3ZlLmJpbmQoc2hvd2Nhc2UpXG4gICAgICAgIFxuICAgIH0pXG4gICAgXG4gICAgbmV4dCgpO1xuICAgIFxufSIsInZhciBuYXZpZ2F0aW9uID0gcmVxdWlyZSgnLi4vLi4vbmF2aWdhdGlvbi5qcycpO1xuXG52YXIgQ29ybmVyID0gcmVxdWlyZSgnLi4vLi4vcmVuZGVyZXIvY29ybmVyLmpzJyk7XG52YXIgZXZlbnRzID0gcmVxdWlyZSgnLi4vZXZlbnRzLmpzJyk7XG5cbnZhciBmb3YgPSA2MDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjdHgsIG5leHQpe1xuICAgIFxuICAgIHZhciBjb3JuZXIgPSBuZXcgQ29ybmVyKHtcbiAgICAgICAgY29udGVudDogY3R4LnRlbXBsYXRlLFxuICAgICAgICBmb3Y6IGZvdlxuICAgIH0pXG4gICAgXG4gICAgY29ybmVyLndhbGwxLiRjb250ZW50LmFkZENsYXNzKCdmYWRlLW91dCcpO1xuICAgIGNvcm5lci53YWxsMi4kY29udGVudC5hZGRDbGFzcygnZmFkZS1vdXQnKTtcbiAgICBcbiAgICBjb3JuZXIuaW5pdCgpO1xuICAgIFxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgY29ybmVyLndhbGwxLiRjb250ZW50LnJlbW92ZUNsYXNzKCdmYWRlLW91dCcpO1xuICAgICAgICBjb3JuZXIud2FsbDIuJGNvbnRlbnQucmVtb3ZlQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgfSk7XG4gICAgXG4gICAgbmF2aWdhdGlvbi5zaG93KCk7XG4gICAgXG4gICAgZXZlbnRzLm9uKHtcbiAgICAgICAgXG4gICAgICAgIHJlc2l6ZTogY29ybmVyLmxheW91dC5iaW5kKGNvcm5lciksXG4gICAgICAgIFxuICAgICAgICBtb3VzZW1vdmU6IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgY29ybmVyLnNldE1vdXNlKGUuY2xpZW50WCk7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICB0cmFuc2l0aW9uT3V0OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb3JuZXIud2FsbDEuJGNvbnRlbnQuYWRkQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgICAgICBjb3JuZXIud2FsbDIuJGNvbnRlbnQuYWRkQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiAyMDA7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHJlbW92ZTogY29ybmVyLnJlbW92ZS5iaW5kKGNvcm5lcilcbiAgICAgICAgXG4gICAgfSk7XG4gICAgXG4gICAgbmV4dCgpO1xuICAgIFxufSIsInZhciBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcuanMnKTtcbnZhciBuYXZpZ2F0aW9uID0gcmVxdWlyZSgnLi4vLi4vbmF2aWdhdGlvbi5qcycpO1xuXG52YXIgUm9vbSA9IHJlcXVpcmUoJy4uLy4uL3JlbmRlcmVyL3Jvb20uanMnKTtcbnZhciBDbG9uZXMgPSByZXF1aXJlKCcuLi8uLi9yZW5kZXJlci9jbG9uZXMuanMnKTtcbnZhciBldmVudHMgPSByZXF1aXJlKCcuLi9ldmVudHMuanMnKTtcblxudmFyIG1ldHJpY3MgPSByZXF1aXJlKCcuLi8uLi9tZXRyaWNzLmpzJyk7XG5cbnZhciAkYm9keSA9ICQoJ2JvZHknKTtcblxudmFyIGZvdiA9IDYwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGN0eCwgbmV4dCl7XG4gICAgXG4gICAgdmFyICRtYWluID0gY3R4LnRlbXBsYXRlLmZpbHRlcignLm1haW4nKTtcbiAgICBcbiAgICAkbWFpbi5hZGRDbGFzcygnZmFkZS1vdXQnKTtcbiAgICBcbiAgICB2YXIgcm9vbSA9IG5ldyBSb29tKHtcbiAgICAgICAgY29udGVudDogJG1haW4sXG4gICAgICAgIGhvcml6b250YWw6IGZhbHNlLFxuICAgICAgICBmb3Y6IGZvdlxuICAgIH0pO1xuICAgIFxuICAgIHJvb20uaW5pdCggY29uZmlnLiRlbGVtZW50ICk7XG4gICAgXG4gICAgJG1haW4ubG9hZEltYWdlcygpO1xuICAgIHJvb20ud2FsbDEuJGNvbnRlbnQubG9hZEltYWdlcygpO1xuICAgIHJvb20ud2FsbDIuJGNvbnRlbnQubG9hZEltYWdlcygpO1xuICAgIFxuICAgIHZhciAkdGl0bGVzID0gY3R4LnRlbXBsYXRlLmZpbHRlcigndWwnKTtcbiAgICAkdGl0bGVzLmFkZENsYXNzKCduYXZfaGlkZGVuJyk7XG4gICAgJGJvZHkuYXBwZW5kKCAkdGl0bGVzICk7XG4gICAgXG4gICAgbmF2aWdhdGlvbi5zaG93KCk7XG4gICAgXG4gICAgJG1haW4uZmluZCgnLnZpZGVvLWNvbnRhaW5lcicpLmxvYWRWaWRlbygpO1xuICAgIFxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgJG1haW4ucmVtb3ZlQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgIHJvb20ud2FsbDEuJGNvbnRlbnQucmVtb3ZlQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgIHJvb20ud2FsbDIuJGNvbnRlbnQucmVtb3ZlQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgICR0aXRsZXMucmVtb3ZlQ2xhc3MoJ25hdl9oaWRkZW4nKVxuICAgIH0pO1xuICAgIFxuICAgIHZhciAkYXV0b0hlaWdodHMgPSBuZXcgQ2xvbmVzKCAkbWFpbiwgcm9vbS53YWxsMS4kY29udGVudCwgcm9vbS53YWxsMi4kY29udGVudCApLmZpbmQoJy5hdXRvLWhlaWdodCcpO1xuICAgIFxuICAgICRhdXRvSGVpZ2h0cy5mb3JFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuaGVpZ2h0KCB3aW5kb3cuaW5uZXJIZWlnaHQgLSBtZXRyaWNzLm1lbnVNYXJnaW4oKSAqIDIgKTtcbiAgICB9KVxuICAgIFxuICAgIHZhciBsYXN0U2Nyb2xsID0gMDtcbiAgICBcbiAgICBldmVudHMub24oe1xuICAgICAgICBcbiAgICAgICAgcmVzaXplOiBfLmRlYm91bmNlKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRhdXRvSGVpZ2h0cy5mb3JFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQoIHdpbmRvdy5pbm5lckhlaWdodCAtIG1ldHJpY3MubWVudU1hcmdpbigpICogMiApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcm9vbS5sYXlvdXQoKTtcbiAgICAgICAgICAgIHJvb20uc2Nyb2xsKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSwgMTAwKSxcbiAgICAgICAgXG4gICAgICAgIHNjcm9sbDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHkgPSBwYWdlWU9mZnNldDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoeSA8PSAwIHx8IHkgPCBsYXN0U2Nyb2xsKXtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbi5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJvb20uc2Nyb2xsKCB5ICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxhc3RTY3JvbGwgPSB5O1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgdHJhbnNpdGlvbk91dDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJG1haW4uYWRkQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgICAgICByb29tLndhbGwxLiRjb250ZW50LmFkZENsYXNzKCdmYWRlLW91dCcpO1xuICAgICAgICAgICAgcm9vbS53YWxsMi4kY29udGVudC5hZGRDbGFzcygnZmFkZS1vdXQnKTtcbiAgICAgICAgICAgICR0aXRsZXMuYWRkQ2xhc3MoJ25hdl9oaWRkZW4nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIDIwMDtcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogcm9vbS5yZW1vdmUuYmluZChyb29tKVxuICAgICAgICBcbiAgICB9KVxuICAgIFxuICAgIG5leHQoKTtcbiAgICBcbn0iLCJ2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnLmpzJyk7XG52YXIgbmF2aWdhdGlvbiA9IHJlcXVpcmUoJy4uLy4uL25hdmlnYXRpb24uanMnKTtcblxudmFyIFJvb20gPSByZXF1aXJlKCcuLi8uLi9yZW5kZXJlci9yb29tLmpzJyk7XG52YXIgQ2xvbmVzID0gcmVxdWlyZSgnLi4vLi4vcmVuZGVyZXIvY2xvbmVzLmpzJyk7XG52YXIgZXZlbnRzID0gcmVxdWlyZSgnLi4vZXZlbnRzLmpzJyk7XG5cbnZhciBmb3YgPSA2MDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjdHgsIG5leHQpe1xuICAgIFxuICAgIGN0eC50ZW1wbGF0ZS5maW5kKCcudGh1bWJuYWlsLWNvbHVtbicpLmFkZENsYXNzKCdmYWRlLW91dCcpO1xuICAgIFxuICAgIHZhciBob3Jpem9udGFsID0gY3R4LnRlbXBsYXRlLmhhc0NsYXNzKCdob3Jpem9udGFsJyk7XG4gICAgXG4gICAgdmFyIHJvb20gPSBuZXcgUm9vbSh7XG4gICAgICAgIGNvbnRlbnQ6IGN0eC50ZW1wbGF0ZSxcbiAgICAgICAgaG9yaXpvbnRhbDogaG9yaXpvbnRhbCxcbiAgICAgICAgZm92OiBmb3ZcbiAgICB9KTtcbiAgICBcbiAgICByb29tLmluaXQoIGNvbmZpZy4kZWxlbWVudCApO1xuICAgIFxuICAgIG5hdmlnYXRpb24uc2hvdygpO1xuICAgIFxuICAgIHZhciBjb2x1bW5zID0gbmV3IENsb25lcyggY3R4LnRlbXBsYXRlLCByb29tLndhbGwxLiRjb250ZW50LCByb29tLndhbGwyLiRjb250ZW50ICkuZmluZCgnLnRodW1ibmFpbC1jb2x1bW4nKTtcbiAgICBcbiAgICBjb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oaSl7XG4gICAgICAgIFxuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmYWRlLW91dCcpO1xuICAgICAgICB9LCBpICogMjAwKVxuICAgICAgICBcbiAgICB9KTtcbiAgICBcbiAgICBldmVudHMub24oe1xuICAgICAgICBcbiAgICAgICAgcmVzaXplOiBfLmRlYm91bmNlKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByb29tLmxheW91dCgpO1xuICAgICAgICAgICAgcm9vbS5zY3JvbGwoKTtcbiAgICAgICAgfSwgMTAwKSxcbiAgICAgICAgXG4gICAgICAgIHNjcm9sbDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJvb20uc2Nyb2xsKCBob3Jpem9udGFsID8gcGFnZVhPZmZzZXQgOiBwYWdlWU9mZnNldCApO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgdHJhbnNpdGlvbk91dDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgICAgICAgICAgfSwgaSAqIDIwMClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zLmxlbmd0aCAqIDIwMCArIDIwMDtcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogcm9vbS5yZW1vdmUuYmluZChyb29tKVxuICAgICAgICBcbiAgICB9KVxuICAgIFxuICAgIG5leHQoKTtcbiAgICBcbn0iLCJyZXF1aXJlKCcuL3JlbmRlcmVyL3plcHRvLnBsdWdpbnMuanMnKTtcblxudmFyIG1ldHJpY3MgPSByZXF1aXJlKCcuL21ldHJpY3MuanMnKTtcbnZhciBuYXYgPSByZXF1aXJlKCcuL25hdmlnYXRpb24uanMnKTtcblxudmFyICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xudmFyICRib2R5ID0gJCgnYm9keScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7XG4gICAgXG4gICAgJChmdW5jdGlvbigpe1xuICAgICAgICBcbiAgICAgICAgJCgnLnZpZGVvLWNvbnRhaW5lcicpLmxvYWRWaWRlbygpO1xuICAgICAgICBcbiAgICAgICAgdmFyICRyc3BJbWdzID0gJCgnLnJzcC1pbWcnKTtcbiAgICAgICAgdmFyICRhdXRvSGVpZ2h0cyA9ICQoJy5hdXRvLWhlaWdodCcpO1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gb25SZXNpemUoKXtcbiAgICAgICAgICAgICRyc3BJbWdzLmxvYWRJbWFnZXMoKTtcbiAgICAgICAgICAgICRhdXRvSGVpZ2h0cy5oZWlnaHQoIHdpbmRvdy5pbm5lckhlaWdodCAtIG1ldHJpY3MuYmFzZU1hcmdpbiAtIG1ldHJpY3MubWVudU1hcmdpbigpICk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgb25SZXNpemUpO1xuICAgICAgICBvblJlc2l6ZSgpO1xuICAgICAgICBcbiAgICAgICAgaWYoICRib2R5Lmhhc0NsYXNzKCdwYWdlLWhvbWUnKSApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIFNob3djYXNlID0gcmVxdWlyZSgnLi9yZW5kZXJlci9zaG93Y2FzZS5qcycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgc2hvd2Nhc2UgPSBuZXcgU2hvd2Nhc2Uoe1xuICAgICAgICAgICAgICAgIGxvZ286ICQoJy5ob21lLWxvZ28nKS5kZXRhY2goKSxcbiAgICAgICAgICAgICAgICBpbWdzOiAkKCcuaG9tZS1pbWcnKS5kZXRhY2goKSxcbiAgICAgICAgICAgICAgICBmb3Y6IDYwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzaG93Y2FzZS5pbml0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIGlmKCAkYm9keS5oYXNDbGFzcygncGFnZS1wcm9qZWN0JykgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBsYXN0U2Nyb2xsID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gb25TY3JvbGwoKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSAkYm9keS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiggc3QgPD0gMCB8fCBzdCA8IGxhc3RTY3JvbGwgKXtcbiAgICAgICAgICAgICAgICAgICAgbmF2LnNob3coKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuYXYuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsYXN0U2Nyb2xsID0gc3Q7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRkb2N1bWVudC5vbignc2Nyb2xsJywgb25TY3JvbGwpO1xuICAgICAgICAgICAgb25TY3JvbGwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0pICAgIFxuICAgIFxufVxuXG4iXX0=\n"],"sourceRoot":"/source/"}